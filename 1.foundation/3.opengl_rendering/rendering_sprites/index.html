
<!DOCTYPE html>

<html class="no-js" lang="en">
<head>
<meta charset="utf-8"/>
<meta content="width=device-width,initial-scale=1" name="viewport"/>
<meta content="Learn Engine Dev is tutorial series for developing a cross platform game engine from scratch." name="description"/>
<meta content="Chukobyte" name="author"/>
<link href="../../../assets/images/favicon.png" rel="icon"/>
<meta content="mkdocs-1.1.2, mkdocs-material-7.1.4" name="generator"/>
<title>Rendering Sprites - Learn Engine Dev</title>
<link href="../../../assets/stylesheets/main.bde7dde4.min.css" rel="stylesheet"/>
<link href="../../../assets/stylesheets/palette.ef6f36e2.min.css" rel="stylesheet"/>
<link crossorigin="" href="https://fonts.gstatic.com" rel="preconnect"/>
<link href="https://fonts.googleapis.com/css?family=Roboto:300,400,400i,700%7CRoboto+Mono&amp;display=fallback" rel="stylesheet"/>
<style>:root{--md-text-font-family:"Roboto";--md-code-font-family:"Roboto Mono"}</style>
<!-- Global site tag (gtag.js) - Google Analytics -->
<script async="" src="https://www.googletagmanager.com/gtag/js?id=G-7S3213MH0R"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-7S3213MH0R');
  gtag('send','pageview');

  /* Register handler to log search on blur */
  document.addEventListener("DOMContentLoaded", () => {
    if (document.forms.search) {
      var query = document.forms.search.query
      query.addEventListener("blur", function() {
        if (this.value) {
          var path = document.location.pathname;
          ga("send", "pageview", path + "?q=" + this.value)
        }
      })
    }
  });
</script>
</head>
<body data-md-color-accent="none" data-md-color-primary="none" data-md-color-scheme="" dir="ltr">
<script>function __prefix(e){return new URL("../../..",location).pathname+"."+e}function __get(e,t=localStorage){return JSON.parse(t.getItem(__prefix(e)))}</script>
<input autocomplete="off" class="md-toggle" data-md-toggle="drawer" id="__drawer" type="checkbox"/>
<input autocomplete="off" class="md-toggle" data-md-toggle="search" id="__search" type="checkbox"/>
<label class="md-overlay" for="__drawer"></label>
<div data-md-component="skip">
<a class="md-skip" href="#rendering-sprites">
          Skip to content
        </a>
</div>
<div data-md-component="announce">
</div>
<header class="md-header" data-md-component="header">
<nav aria-label="Header" class="md-header__inner md-grid">
<a aria-label="Learn Engine Dev" class="md-header__button md-logo" data-md-component="logo" href="../../.." title="Learn Engine Dev">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54z"></path></svg>
</a>
<label class="md-header__button md-icon" for="__drawer">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2z"></path></svg>
</label>
<div class="md-header__title" data-md-component="header-title">
<div class="md-header__ellipsis">
<div class="md-header__topic">
<span class="md-ellipsis">
            Learn Engine Dev
          </span>
</div>
<div class="md-header__topic" data-md-component="header-topic">
<span class="md-ellipsis">
            
              Rendering Sprites
            
          </span>
</div>
</div>
</div>
<label class="md-header__button md-icon" for="__search">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5z"></path></svg>
</label>
<div class="md-search" data-md-component="search" role="dialog">
<label class="md-search__overlay" for="__search"></label>
<div class="md-search__inner" role="search">
<form class="md-search__form" name="search">
<input aria-label="Search" autocapitalize="off" autocomplete="off" autocorrect="off" class="md-search__input" data-md-component="search-query" data-md-state="active" name="query" placeholder="Search" required="" spellcheck="false" type="text"/>
<label class="md-search__icon md-icon" for="__search">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5z"></path></svg>
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"></path></svg>
</label>
<button aria-label="Clear" class="md-search__icon md-icon" tabindex="-1" type="reset">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41z"></path></svg>
</button>
</form>
<div class="md-search__output">
<div class="md-search__scrollwrap" data-md-scrollfix="">
<div class="md-search-result" data-md-component="search-result">
<div class="md-search-result__meta">
            Initializing search
          </div>
<ol class="md-search-result__list"></ol>
</div>
</div>
</div>
</div>
</div>
<div class="md-header__source">
<a class="md-source" data-md-component="source" href="https://github.com/Chukobyte/learn-engine-dev" title="Go to repository">
<div class="md-source__icon md-icon">
<svg viewbox="0 0 448 512" xmlns="http://www.w3.org/2000/svg"><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"></path></svg>
</div>
<div class="md-source__repository">
    GitHub
  </div>
</a>
</div>
</nav>
</header>
<div class="md-container" data-md-component="container">
<main class="md-main" data-md-component="main">
<div class="md-main__inner md-grid">
<div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation">
<div class="md-sidebar__scrollwrap">
<div class="md-sidebar__inner">
<nav aria-label="Navigation" class="md-nav md-nav--primary" data-md-level="0">
<label class="md-nav__title" for="__drawer">
<a aria-label="Learn Engine Dev" class="md-nav__button md-logo" data-md-component="logo" href="../../.." title="Learn Engine Dev">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54z"></path></svg>
</a>
    Learn Engine Dev
  </label>
<div class="md-nav__source">
<a class="md-source" data-md-component="source" href="https://github.com/Chukobyte/learn-engine-dev" title="Go to repository">
<div class="md-source__icon md-icon">
<svg viewbox="0 0 448 512" xmlns="http://www.w3.org/2000/svg"><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"></path></svg>
</div>
<div class="md-source__repository">
    GitHub
  </div>
</a>
</div>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../../..">
        Introduction
      </a>
</li>
<li class="md-nav__item md-nav__item--active md-nav__item--nested">
<input checked="" class="md-nav__toggle md-toggle" data-md-toggle="__nav_2" id="__nav_2" type="checkbox"/>
<label class="md-nav__link" for="__nav_2">
        1. Foundation
        <span class="md-nav__icon md-icon"></span>
</label>
<nav aria-label="1. Foundation" class="md-nav" data-md-level="1">
<label class="md-nav__title" for="__nav_2">
<span class="md-nav__icon md-icon"></span>
          1. Foundation
        </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle" data-md-toggle="__nav_2_1" id="__nav_2_1" type="checkbox"/>
<label class="md-nav__link" for="__nav_2_1">
        Embedding Python
        <span class="md-nav__icon md-icon"></span>
</label>
<nav aria-label="Embedding Python" class="md-nav" data-md-level="2">
<label class="md-nav__title" for="__nav_2_1">
<span class="md-nav__icon md-icon"></span>
          Embedding Python
        </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../../1.embedding_python/hello_python/">
        Hello Python
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../1.embedding_python/embedding_further/">
        Embedding Further
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../1.embedding_python/custom_python_module/">
        Custom Python Module
      </a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle" data-md-toggle="__nav_2_2" id="__nav_2_2" type="checkbox"/>
<label class="md-nav__link" for="__nav_2_2">
        Game Loop &amp; SDL
        <span class="md-nav__icon md-icon"></span>
</label>
<nav aria-label="Game Loop &amp; SDL" class="md-nav" data-md-level="2">
<label class="md-nav__title" for="__nav_2_2">
<span class="md-nav__icon md-icon"></span>
          Game Loop &amp; SDL
        </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../../2.game_loop_and_sdl/game_loop_introduction/">
        Game Loop Introduction
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../2.game_loop_and_sdl/initialize_sdl/">
        Initialize SDL
      </a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item md-nav__item--active md-nav__item--nested">
<input checked="" class="md-nav__toggle md-toggle" data-md-toggle="__nav_2_3" id="__nav_2_3" type="checkbox"/>
<label class="md-nav__link" for="__nav_2_3">
        OpenGL Rendering
        <span class="md-nav__icon md-icon"></span>
</label>
<nav aria-label="OpenGL Rendering" class="md-nav" data-md-level="2">
<label class="md-nav__title" for="__nav_2_3">
<span class="md-nav__icon md-icon"></span>
          OpenGL Rendering
        </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../asset_management/">
        Asset Management
      </a>
</li>
<li class="md-nav__item md-nav__item--active">
<input class="md-nav__toggle md-toggle" data-md-toggle="toc" id="__toc" type="checkbox"/>
<label class="md-nav__link md-nav__link--active" for="__toc">
          Rendering Sprites
          <span class="md-nav__icon md-icon"></span>
</label>
<a class="md-nav__link md-nav__link--active" href="./">
        Rendering Sprites
      </a>
<nav aria-label="Table of contents" class="md-nav md-nav--secondary">
<label class="md-nav__title" for="__toc">
<span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
<ul class="md-nav__list" data-md-component="toc" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="#math-lib">
    Math Lib
  </a>
<nav aria-label="Math Lib" class="md-nav">
<ul class="md-nav__list">
<li class="md-nav__item">
<a class="md-nav__link" href="#glm">
    GLM
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#rectangle">
    Rectangle
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#custom-math-header">
    Custom Math Header
  </a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#color">
    Color
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#renderer-batcher">
    Renderer Batcher
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#2d-rendering">
    2D Rendering
  </a>
<nav aria-label="2D Rendering" class="md-nav">
<ul class="md-nav__list">
<li class="md-nav__item">
<a class="md-nav__link" href="#shaders">
    Shaders
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#spriterenderer">
    SpriteRenderer
  </a>
<nav aria-label="SpriteRenderer" class="md-nav">
<ul class="md-nav__list">
<li class="md-nav__item">
<a class="md-nav__link" href="#shader-code">
    Shader Code
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#spriterenderer-class">
    SpriteRenderer Class
  </a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#renderer2d">
    Renderer2D
  </a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#render-sprites">
    Render Sprites
  </a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../rendering_text/">
        Rendering Text
      </a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle" data-md-toggle="__nav_2_4" id="__nav_2_4" type="checkbox"/>
<label class="md-nav__link" for="__nav_2_4">
        Implementing Audio
        <span class="md-nav__icon md-icon"></span>
</label>
<nav aria-label="Implementing Audio" class="md-nav" data-md-level="2">
<label class="md-nav__title" for="__nav_2_4">
<span class="md-nav__icon md-icon"></span>
          Implementing Audio
        </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../../4.implementing_audio/using_sdl_mixer/">
        Using SDL_mixer
      </a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle" data-md-toggle="__nav_2_5" id="__nav_2_5" type="checkbox"/>
<label class="md-nav__link" for="__nav_2_5">
        Input Management
        <span class="md-nav__icon md-icon"></span>
</label>
<nav aria-label="Input Management" class="md-nav" data-md-level="2">
<label class="md-nav__title" for="__nav_2_5">
<span class="md-nav__icon md-icon"></span>
          Input Management
        </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../../5.input_management/input_events/">
        Input Events
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../5.input_management/input_management/">
        Input Management
      </a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle" data-md-toggle="__nav_2_6" id="__nav_2_6" type="checkbox"/>
<label class="md-nav__link" for="__nav_2_6">
        Entity Component System
        <span class="md-nav__icon md-icon"></span>
</label>
<nav aria-label="Entity Component System" class="md-nav" data-md-level="2">
<label class="md-nav__title" for="__nav_2_6">
<span class="md-nav__icon md-icon"></span>
          Entity Component System
        </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../../6.entity_component_system/building_an_ecs/">
        Building An ECS
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../6.entity_component_system/managers/">
        Managers
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../6.entity_component_system/ecs_orchestrator/">
        ECS Orchestrator
      </a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle" data-md-toggle="__nav_2_7" id="__nav_2_7" type="checkbox"/>
<label class="md-nav__link" for="__nav_2_7">
        Serializing With JSON
        <span class="md-nav__icon md-icon"></span>
</label>
<nav aria-label="Serializing With JSON" class="md-nav" data-md-level="2">
<label class="md-nav__title" for="__nav_2_7">
<span class="md-nav__icon md-icon"></span>
          Serializing With JSON
        </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../../7.serializing_with_json/parsing_json_properties_file/">
        Parsing JSON Properties File
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../7.serializing_with_json/creating_scene_json_files/">
        Creating Scene Json Files
      </a>
</li>
</ul>
</nav>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle" data-md-toggle="__nav_3" id="__nav_3" type="checkbox"/>
<label class="md-nav__link" for="__nav_3">
        2. Engine API
        <span class="md-nav__icon md-icon"></span>
</label>
<nav aria-label="2. Engine API" class="md-nav" data-md-level="1">
<label class="md-nav__title" for="__nav_3">
<span class="md-nav__icon md-icon"></span>
          2. Engine API
        </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../../../2.engine_api/about/">
        Defining Red Engine API
      </a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle" data-md-toggle="__nav_4" id="__nav_4" type="checkbox"/>
<label class="md-nav__link" for="__nav_4">
        3. Games
        <span class="md-nav__icon md-icon"></span>
</label>
<nav aria-label="3. Games" class="md-nav" data-md-level="1">
<label class="md-nav__title" for="__nav_4">
<span class="md-nav__icon md-icon"></span>
          3. Games
        </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../../../3.games/about/">
        Making Games
      </a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../../source_code/source_code/">
        Source Code
      </a>
</li>
</ul>
</nav>
</div>
</div>
</div>
<div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc">
<div class="md-sidebar__scrollwrap">
<div class="md-sidebar__inner">
<nav aria-label="Table of contents" class="md-nav md-nav--secondary">
<label class="md-nav__title" for="__toc">
<span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
<ul class="md-nav__list" data-md-component="toc" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="#math-lib">
    Math Lib
  </a>
<nav aria-label="Math Lib" class="md-nav">
<ul class="md-nav__list">
<li class="md-nav__item">
<a class="md-nav__link" href="#glm">
    GLM
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#rectangle">
    Rectangle
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#custom-math-header">
    Custom Math Header
  </a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#color">
    Color
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#renderer-batcher">
    Renderer Batcher
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#2d-rendering">
    2D Rendering
  </a>
<nav aria-label="2D Rendering" class="md-nav">
<ul class="md-nav__list">
<li class="md-nav__item">
<a class="md-nav__link" href="#shaders">
    Shaders
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#spriterenderer">
    SpriteRenderer
  </a>
<nav aria-label="SpriteRenderer" class="md-nav">
<ul class="md-nav__list">
<li class="md-nav__item">
<a class="md-nav__link" href="#shader-code">
    Shader Code
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#spriterenderer-class">
    SpriteRenderer Class
  </a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#renderer2d">
    Renderer2D
  </a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#render-sprites">
    Render Sprites
  </a>
</li>
</ul>
</nav>
</div>
</div>
</div>
<div class="md-content" data-md-component="content">
<article class="md-content__inner md-typeset">
<h1 id="rendering-sprites">Rendering Sprites</h1>
<h2 id="math-lib">Math Lib</h2>
<h3 id="glm">GLM</h3>
<p><a href="https://github.com/g-truc/glm">GLM</a> is a header only math library based on the OpenGL Shading Language (GLSL) specifications.  Most things related to math such as vectors, matrices, etc... will be handled by GLM.</p>
<h3 id="rectangle">Rectangle</h3>
<p>The <code>Rectangle</code> class will mostly be used for defining the bounds of a sprite's draw source and draw destination which we'll get to later.</p>
<div class="highlight"><pre><span></span><code><span class="cp">#ifndef RECTANGLE_H</span>
<span class="cp">#define RECTANGLE_H</span>

<span class="cp">#include</span> <span class="cpf">&lt;iostream&gt;</span><span class="cp"></span>

<span class="cp">#include</span> <span class="cpf">&lt;glm/glm.hpp&gt;</span><span class="cp"></span>

<span class="k">class</span> <span class="nc">Rectangle</span> <span class="p">{</span>
  <span class="k">public</span><span class="o">:</span>
    <span class="kt">float</span> <span class="n">x</span><span class="p">;</span>
    <span class="kt">float</span> <span class="n">y</span><span class="p">;</span>
    <span class="kt">float</span> <span class="n">w</span><span class="p">;</span>
    <span class="kt">float</span> <span class="n">h</span><span class="p">;</span>

    <span class="n">Rectangle</span><span class="p">()</span><span class="o">:</span> <span class="n">x</span><span class="p">(</span><span class="mf">0.0f</span><span class="p">),</span> <span class="n">y</span><span class="p">(</span><span class="mf">0.0f</span><span class="p">),</span> <span class="n">w</span><span class="p">(</span><span class="mf">0.0f</span><span class="p">),</span> <span class="n">h</span><span class="p">(</span><span class="mf">0.0f</span><span class="p">)</span> <span class="p">{}</span>
    <span class="n">Rectangle</span><span class="p">(</span><span class="kt">float</span> <span class="n">x</span><span class="p">,</span> <span class="kt">float</span> <span class="n">y</span><span class="p">,</span> <span class="kt">float</span> <span class="n">w</span><span class="p">,</span> <span class="kt">float</span> <span class="n">h</span><span class="p">)</span><span class="o">:</span> <span class="n">x</span><span class="p">(</span><span class="n">x</span><span class="p">),</span> <span class="n">y</span><span class="p">(</span><span class="n">y</span><span class="p">),</span> <span class="n">w</span><span class="p">(</span><span class="n">w</span><span class="p">),</span> <span class="n">h</span><span class="p">(</span><span class="n">h</span><span class="p">)</span> <span class="p">{}</span>
    <span class="n">Rectangle</span><span class="p">(</span><span class="kt">float</span> <span class="n">x</span><span class="p">,</span> <span class="kt">float</span> <span class="n">y</span><span class="p">,</span> <span class="n">glm</span><span class="o">::</span><span class="n">vec2</span> <span class="n">size</span><span class="p">)</span><span class="o">:</span> <span class="n">x</span><span class="p">(</span><span class="n">x</span><span class="p">),</span> <span class="n">y</span><span class="p">(</span><span class="n">y</span><span class="p">),</span> <span class="n">w</span><span class="p">(</span><span class="n">size</span><span class="p">.</span><span class="n">x</span><span class="p">),</span> <span class="n">h</span><span class="p">(</span><span class="n">size</span><span class="p">.</span><span class="n">y</span><span class="p">)</span> <span class="p">{}</span>
    <span class="n">Rectangle</span><span class="p">(</span><span class="n">glm</span><span class="o">::</span><span class="n">vec2</span> <span class="n">position</span><span class="p">,</span> <span class="n">glm</span><span class="o">::</span><span class="n">vec2</span> <span class="n">size</span><span class="p">)</span><span class="o">:</span> <span class="n">x</span><span class="p">(</span><span class="n">position</span><span class="p">.</span><span class="n">x</span><span class="p">),</span> <span class="n">y</span><span class="p">(</span><span class="n">position</span><span class="p">.</span><span class="n">y</span><span class="p">),</span> <span class="n">w</span><span class="p">(</span><span class="n">size</span><span class="p">.</span><span class="n">x</span><span class="p">),</span> <span class="n">h</span><span class="p">(</span><span class="n">size</span><span class="p">.</span><span class="n">y</span><span class="p">)</span> <span class="p">{}</span>

    <span class="kt">bool</span> <span class="k">operator</span><span class="o">==</span><span class="p">(</span><span class="k">const</span> <span class="n">Rectangle</span> <span class="o">&amp;</span><span class="n">otherRect2</span><span class="p">)</span> <span class="k">const</span> <span class="p">{</span>
        <span class="k">return</span> <span class="k">this</span><span class="o">-&gt;</span><span class="n">x</span> <span class="o">==</span> <span class="n">otherRect2</span><span class="p">.</span><span class="n">x</span> <span class="o">&amp;&amp;</span> <span class="k">this</span><span class="o">-&gt;</span><span class="n">y</span> <span class="o">==</span> <span class="n">otherRect2</span><span class="p">.</span><span class="n">y</span> <span class="o">&amp;&amp;</span> <span class="k">this</span><span class="o">-&gt;</span><span class="n">w</span> <span class="o">==</span> <span class="n">otherRect2</span><span class="p">.</span><span class="n">w</span> <span class="o">&amp;&amp;</span> <span class="k">this</span><span class="o">-&gt;</span><span class="n">h</span> <span class="o">==</span> <span class="n">otherRect2</span><span class="p">.</span><span class="n">h</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="kt">bool</span> <span class="k">operator</span><span class="o">!=</span><span class="p">(</span><span class="k">const</span> <span class="n">Rectangle</span> <span class="o">&amp;</span><span class="n">otherRect2</span><span class="p">)</span> <span class="k">const</span> <span class="p">{</span>
        <span class="k">return</span> <span class="o">!</span><span class="p">(</span><span class="o">*</span><span class="k">this</span> <span class="o">==</span> <span class="n">otherRect2</span><span class="p">);</span>
    <span class="p">}</span>

    <span class="k">friend</span> <span class="n">std</span><span class="o">::</span><span class="n">ostream</span><span class="o">&amp;</span> <span class="k">operator</span><span class="o">&lt;&lt;</span><span class="p">(</span><span class="n">std</span><span class="o">::</span><span class="n">ostream</span><span class="o">&amp;</span> <span class="n">os</span><span class="p">,</span> <span class="k">const</span> <span class="n">Rectangle</span> <span class="o">&amp;</span><span class="n">r</span><span class="p">);</span>
<span class="p">};</span>

<span class="cp">#endif </span><span class="c1">//RECTANGLE_H</span>
</code></pre></div>
<div class="highlight"><pre><span></span><code><span class="cp">#include</span> <span class="cpf">"rectangle.h"</span><span class="cp"></span>

<span class="n">std</span><span class="o">::</span><span class="n">ostream</span><span class="o">&amp;</span> <span class="k">operator</span><span class="o">&lt;&lt;</span><span class="p">(</span><span class="n">std</span><span class="o">::</span><span class="n">ostream</span><span class="o">&amp;</span> <span class="n">os</span><span class="p">,</span> <span class="k">const</span> <span class="n">Rectangle</span> <span class="o">&amp;</span><span class="n">r</span><span class="p">)</span> <span class="p">{</span>
    <span class="n">os</span> <span class="o">&lt;&lt;</span> <span class="s">"("</span> <span class="o">&lt;&lt;</span> <span class="n">r</span><span class="p">.</span><span class="n">x</span> <span class="o">&lt;&lt;</span> <span class="s">", "</span> <span class="o">&lt;&lt;</span> <span class="n">r</span><span class="p">.</span><span class="n">y</span> <span class="o">&lt;&lt;</span> <span class="s">", "</span> <span class="o">&lt;&lt;</span> <span class="n">r</span><span class="p">.</span><span class="n">w</span> <span class="o">&lt;&lt;</span> <span class="s">", "</span> <span class="o">&lt;&lt;</span> <span class="n">r</span><span class="p">.</span><span class="n">h</span> <span class="o">&lt;&lt;</span> <span class="s">")"</span><span class="p">;</span>
    <span class="k">return</span> <span class="n">os</span><span class="p">;</span>
<span class="p">}</span>
</code></pre></div>
<h3 id="custom-math-header">Custom Math Header</h3>
<p><strong><em>Red Engine</em></strong> will use GLM, but we may want to use another math library or write our own in the future.  To make this easier, will we define <a href="https://en.cppreference.com/w/cpp/language/type_alias">type aliases</a> for math related classes.</p>
<div class="highlight"><pre><span></span><code><span class="cp">#ifndef MATH_H</span>
<span class="cp">#define MATH_H</span>

<span class="cp">#include</span> <span class="cpf">"rectangle.h"</span><span class="cp"></span>

<span class="k">using</span> <span class="n">Vector2</span> <span class="o">=</span> <span class="n">glm</span><span class="o">::</span><span class="n">vec2</span><span class="p">;</span>
<span class="k">using</span> <span class="n">IVector2</span> <span class="o">=</span> <span class="n">glm</span><span class="o">::</span><span class="n">ivec2</span><span class="p">;</span>
<span class="k">using</span> <span class="n">Vector3</span> <span class="o">=</span> <span class="n">glm</span><span class="o">::</span><span class="n">vec3</span><span class="p">;</span>
<span class="k">using</span> <span class="n">Matrix4</span> <span class="o">=</span> <span class="n">glm</span><span class="o">::</span><span class="n">mat4</span><span class="p">;</span>
<span class="k">using</span> <span class="n">Rect2</span> <span class="o">=</span> <span class="n">Rectangle</span><span class="p">;</span>

<span class="cp">#endif </span><span class="c1">//MATH_H</span>
</code></pre></div>
<h2 id="color">Color</h2>
<p>Not much to explain other than needing a concept of color within the engine.</p>
<div class="highlight"><pre><span></span><code><span class="cp">#ifndef COLOR_H</span>
<span class="cp">#define COLOR_H</span>

<span class="cp">#include</span> <span class="cpf">&lt;glad/glad.h&gt;</span><span class="cp"></span>

<span class="k">class</span> <span class="nc">Color</span> <span class="p">{</span>
  <span class="k">public</span><span class="o">:</span>
    <span class="kt">float</span> <span class="n">r</span> <span class="o">=</span> <span class="mf">1.0f</span><span class="p">;</span>
    <span class="kt">float</span> <span class="n">g</span> <span class="o">=</span> <span class="mf">1.0f</span><span class="p">;</span>
    <span class="kt">float</span> <span class="n">b</span> <span class="o">=</span> <span class="mf">1.0f</span><span class="p">;</span>
    <span class="kt">float</span> <span class="n">a</span> <span class="o">=</span> <span class="mf">1.0f</span><span class="p">;</span>

    <span class="n">Color</span><span class="p">()</span> <span class="p">{}</span>
    <span class="n">Color</span><span class="p">(</span><span class="n">GLfloat</span> <span class="n">red</span><span class="p">,</span> <span class="n">GLfloat</span> <span class="n">green</span><span class="p">,</span> <span class="n">GLfloat</span> <span class="n">blue</span><span class="p">)</span> <span class="o">:</span> <span class="n">r</span><span class="p">(</span><span class="n">red</span><span class="p">),</span> <span class="n">g</span><span class="p">(</span><span class="n">green</span><span class="p">),</span> <span class="n">b</span><span class="p">(</span><span class="n">blue</span><span class="p">),</span> <span class="n">a</span><span class="p">(</span><span class="mf">1.0f</span><span class="p">)</span> <span class="p">{}</span>
    <span class="n">Color</span><span class="p">(</span><span class="n">GLfloat</span> <span class="n">red</span><span class="p">,</span> <span class="n">GLfloat</span> <span class="n">green</span><span class="p">,</span> <span class="n">GLfloat</span> <span class="n">blue</span><span class="p">,</span> <span class="n">GLfloat</span> <span class="n">alpha</span><span class="p">)</span> <span class="o">:</span> <span class="n">r</span><span class="p">(</span><span class="n">red</span><span class="p">),</span> <span class="n">g</span><span class="p">(</span><span class="n">green</span><span class="p">),</span> <span class="n">b</span><span class="p">(</span><span class="n">blue</span><span class="p">),</span> <span class="n">a</span><span class="p">(</span><span class="n">alpha</span><span class="p">)</span> <span class="p">{}</span>

    <span class="n">Color</span> <span class="k">operator</span><span class="o">*</span><span class="p">(</span><span class="kt">float</span> <span class="n">value</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">return</span> <span class="n">Color</span><span class="p">(</span><span class="k">this</span><span class="o">-&gt;</span><span class="n">r</span> <span class="o">*</span> <span class="n">value</span><span class="p">,</span> <span class="k">this</span><span class="o">-&gt;</span><span class="n">g</span> <span class="o">*</span> <span class="n">value</span><span class="p">,</span> <span class="k">this</span><span class="o">-&gt;</span><span class="n">b</span> <span class="o">*</span> <span class="n">value</span><span class="p">,</span> <span class="k">this</span><span class="o">-&gt;</span><span class="n">a</span><span class="p">);</span>
    <span class="p">}</span>
<span class="p">};</span>

<span class="cp">#endif </span><span class="c1">//COLOR_H</span>
</code></pre></div>
<h2 id="renderer-batcher">Renderer Batcher</h2>
<p>The <code>RendererBatcher</code> class will be used to take draw calls and batch them to be used during rendering.  Typically, batching is done to limit draw calls for efficiency and performance reasons but for simplicity’s sake this batcher will be designed to just defer and submit draw calls during the <code>Render</code> phase.</p>
<div class="highlight"><pre><span></span><code><span class="cp">#ifndef RENDERER_BATCHER_H</span>
<span class="cp">#define RENDERER_BATCHER_H</span>

<span class="cp">#include</span> <span class="cpf">&lt;vector&gt;</span><span class="cp"></span>
<span class="cp">#include</span> <span class="cpf">&lt;map&gt;</span><span class="cp"></span>
<span class="cp">#include</span> <span class="cpf">&lt;string&gt;</span><span class="cp"></span>
<span class="cp">#include</span> <span class="cpf">&lt;functional&gt;</span><span class="cp"></span>

<span class="cp">#include</span> <span class="cpf">"./re/rendering/color.h"</span><span class="cp"></span>
<span class="cp">#include</span> <span class="cpf">"./re/rendering/texture.h"</span><span class="cp"></span>
<span class="cp">#include</span> <span class="cpf">"./re/math/math.h"</span><span class="cp"></span>

<span class="k">struct</span> <span class="nc">SpriteBatchItem</span> <span class="p">{</span>
    <span class="n">Texture</span> <span class="o">*</span><span class="n">texture2D</span> <span class="o">=</span> <span class="k">nullptr</span><span class="p">;</span>
    <span class="n">Rect2</span> <span class="n">sourceRectangle</span><span class="p">;</span>
    <span class="n">Rect2</span> <span class="n">destinationRectangle</span><span class="p">;</span>
    <span class="kt">float</span> <span class="n">rotation</span> <span class="o">=</span> <span class="mf">0.0f</span><span class="p">;</span>
    <span class="n">Color</span> <span class="n">color</span> <span class="o">=</span> <span class="n">Color</span><span class="p">(</span><span class="mf">1.0f</span><span class="p">,</span> <span class="mf">1.0f</span><span class="p">,</span> <span class="mf">1.0f</span><span class="p">,</span> <span class="mf">1.0f</span><span class="p">);</span>
    <span class="kt">bool</span> <span class="n">flipX</span> <span class="o">=</span> <span class="nb">false</span><span class="p">;</span>
    <span class="kt">bool</span> <span class="n">flipY</span> <span class="o">=</span> <span class="nb">false</span><span class="p">;</span>
<span class="p">};</span>

<span class="k">struct</span> <span class="nc">ZIndexDrawBatch</span> <span class="p">{</span>
    <span class="n">std</span><span class="o">::</span><span class="n">vector</span><span class="o">&lt;</span><span class="n">SpriteBatchItem</span><span class="o">&gt;</span> <span class="n">spriteDrawBatches</span><span class="p">;</span>
<span class="p">};</span>

<span class="k">using</span> <span class="n">RenderFlushFunction</span> <span class="o">=</span> <span class="n">std</span><span class="o">::</span><span class="n">function</span><span class="o">&lt;</span><span class="kt">void</span><span class="p">(</span><span class="k">const</span> <span class="kt">int</span> <span class="n">zIndex</span><span class="p">,</span> <span class="k">const</span> <span class="n">ZIndexDrawBatch</span> <span class="o">&amp;</span><span class="n">zIndexDrawBatch</span><span class="p">)</span><span class="o">&gt;</span><span class="p">;</span>

<span class="k">class</span> <span class="nc">RendererBatcher</span> <span class="p">{</span>
  <span class="k">public</span><span class="o">:</span>
    <span class="kt">void</span> <span class="n">BatchDrawSprite</span><span class="p">(</span><span class="n">SpriteBatchItem</span> <span class="n">spriteBatchItem</span><span class="p">,</span> <span class="kt">int</span> <span class="n">zIndex</span><span class="p">);</span>
    <span class="kt">void</span> <span class="nf">Flush</span><span class="p">(</span><span class="k">const</span> <span class="n">RenderFlushFunction</span> <span class="o">&amp;</span><span class="n">renderFlushFunction</span><span class="p">);</span>

  <span class="k">private</span><span class="o">:</span>
    <span class="n">std</span><span class="o">::</span><span class="n">map</span><span class="o">&lt;</span><span class="kt">int</span><span class="p">,</span> <span class="n">ZIndexDrawBatch</span><span class="o">&gt;</span> <span class="n">drawBatches</span><span class="p">;</span>
<span class="p">};</span>

<span class="cp">#endif </span><span class="c1">//RENDERER_BATCHER_H</span>
</code></pre></div>
<div class="highlight"><pre><span></span><code><span class="cp">#include</span> <span class="cpf">"./renderer_batcher.h"</span><span class="cp"></span>

<span class="kt">void</span> <span class="nf">RendererBatcher::BatchDrawSprite</span><span class="p">(</span><span class="n">SpriteBatchItem</span> <span class="n">spriteBatchItem</span><span class="p">,</span> <span class="kt">int</span> <span class="n">zIndex</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">if</span> <span class="p">(</span><span class="n">drawBatches</span><span class="p">.</span><span class="n">find</span><span class="p">(</span><span class="n">zIndex</span><span class="p">)</span> <span class="o">==</span> <span class="n">drawBatches</span><span class="p">.</span><span class="n">end</span><span class="p">())</span> <span class="p">{</span>
        <span class="n">drawBatches</span><span class="p">.</span><span class="n">emplace</span><span class="p">(</span><span class="n">zIndex</span><span class="p">,</span> <span class="n">ZIndexDrawBatch</span><span class="p">{});</span>
    <span class="p">}</span>
    <span class="n">drawBatches</span><span class="p">[</span><span class="n">zIndex</span><span class="p">].</span><span class="n">spriteDrawBatches</span><span class="p">.</span><span class="n">emplace_back</span><span class="p">(</span><span class="n">spriteBatchItem</span><span class="p">);</span>
<span class="p">}</span>

<span class="kt">void</span> <span class="nf">RendererBatcher::Flush</span><span class="p">(</span><span class="k">const</span> <span class="n">RenderFlushFunction</span> <span class="o">&amp;</span><span class="n">renderFlushFunction</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">for</span> <span class="p">(</span><span class="k">const</span> <span class="k">auto</span> <span class="o">&amp;</span><span class="nl">pair</span> <span class="p">:</span> <span class="n">drawBatches</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">const</span> <span class="kt">int</span> <span class="n">zIndex</span> <span class="o">=</span> <span class="n">pair</span><span class="p">.</span><span class="n">first</span><span class="p">;</span>
        <span class="k">const</span> <span class="n">ZIndexDrawBatch</span> <span class="o">&amp;</span><span class="n">zIndexDrawBatch</span> <span class="o">=</span> <span class="n">pair</span><span class="p">.</span><span class="n">second</span><span class="p">;</span>
        <span class="n">renderFlushFunction</span><span class="p">(</span><span class="n">zIndex</span><span class="p">,</span> <span class="n">zIndexDrawBatch</span><span class="p">);</span>
    <span class="p">}</span>
    <span class="n">drawBatches</span><span class="p">.</span><span class="n">clear</span><span class="p">();</span>
<span class="p">}</span>
</code></pre></div>
<p>The first thing to point out is the <code>SpriteBatchItem</code> struct as this will be used to determine what to render for a sprite.  <strong><em>Red Engine</em></strong> will group draw batches by their z indices.  The <code>ZIndexDrawBatch</code> struct will represent a draw batch for a particular z index.  We also define an alias <code>RenderFlushFunction</code> to be used as a lambda function to render flushed draw batches by the Renderer which we'll get to later.</p>
<p><code>RendererBatcher</code> class is currently simple as it has one map and two functions.  The <code>drawBatches</code> map maintains the order of draw batches based on their z indices.  <code>BatchDrawSprite</code> will submit a batch item to the batcher to draw during the render phase.  The <code>Flush</code> function is called during the render phase to render batch items submitted and will clear them when completed.</p>
<h2 id="2d-rendering">2D Rendering</h2>
<h3 id="shaders">Shaders</h3>
<p>What are shaders?  They are simply GPU programs, in the case of OpenGL written in <a href="https://www.khronos.org/opengl/wiki/OpenGL_Shading_Language">GLSL</a> (OpenGL Shading Language).  Before we write the renderer for <strong><em>Red Engine</em></strong> we'll first implement the <code>Shader</code> class which will compile shaders, install the shaders for use, and set <a href="https://www.khronos.org/opengl/wiki/Uniform_(GLSL)">uniform variables</a>.</p>
<p>A shader can be written for each of the <a href="https://www.khronos.org/opengl/wiki/Shader#Stages">shader stages</a>, but we will only use vertex and fragment shaders in <strong><em>Red Engine</em></strong>.</p>
<div class="highlight"><pre><span></span><code><span class="cp">#ifndef SHADER_H</span>
<span class="cp">#define SHADER_H</span>

<span class="cp">#include</span> <span class="cpf">&lt;string&gt;</span><span class="cp"></span>
<span class="cp">#include</span> <span class="cpf">&lt;fstream&gt;</span><span class="cp"></span>
<span class="cp">#include</span> <span class="cpf">&lt;sstream&gt;</span><span class="cp"></span>
<span class="cp">#include</span> <span class="cpf">&lt;iostream&gt;</span><span class="cp"></span>

<span class="cp">#include</span> <span class="cpf">&lt;glad/glad.h&gt;</span><span class="cp"></span>

<span class="cp">#include</span> <span class="cpf">"../math/math.h"</span><span class="cp"></span>
<span class="cp">#include</span> <span class="cpf">"./color.h"</span><span class="cp"></span>
<span class="cp">#include</span> <span class="cpf">"../utils/logger.h"</span><span class="cp"></span>

<span class="k">struct</span> <span class="nc">OpenGLShaderSourceCode</span> <span class="p">{</span>
    <span class="n">std</span><span class="o">::</span><span class="n">string</span> <span class="n">vertex</span><span class="p">;</span>
    <span class="n">std</span><span class="o">::</span><span class="n">string</span> <span class="n">fragment</span><span class="p">;</span>
<span class="p">};</span>

<span class="k">class</span> <span class="nc">Shader</span> <span class="p">{</span>
  <span class="k">public</span><span class="o">:</span>
    <span class="n">Shader</span><span class="p">();</span>
    <span class="n">Shader</span><span class="p">(</span><span class="k">const</span> <span class="n">std</span><span class="o">::</span><span class="n">string</span> <span class="o">&amp;</span><span class="n">vertexPath</span><span class="p">,</span> <span class="k">const</span> <span class="n">std</span><span class="o">::</span><span class="n">string</span> <span class="o">&amp;</span><span class="n">fragmentPath</span><span class="p">);</span>
    <span class="n">Shader</span><span class="p">(</span><span class="n">OpenGLShaderSourceCode</span> <span class="n">openGlShaderSourceCode</span><span class="p">);</span>
    <span class="o">~</span><span class="n">Shader</span><span class="p">();</span>
    <span class="n">OpenGLShaderSourceCode</span> <span class="nf">GetOpenGLShaderSourceFromPaths</span><span class="p">(</span><span class="k">const</span> <span class="n">std</span><span class="o">::</span><span class="n">string</span> <span class="o">&amp;</span><span class="n">vertexPath</span><span class="p">,</span> <span class="k">const</span> <span class="n">std</span><span class="o">::</span><span class="n">string</span> <span class="o">&amp;</span><span class="n">fragmentPath</span><span class="p">);</span>
    <span class="kt">void</span> <span class="nf">Compile</span><span class="p">(</span><span class="n">OpenGLShaderSourceCode</span> <span class="n">openGlShaderSourceCode</span><span class="p">);</span>
    <span class="kt">void</span> <span class="nf">Use</span><span class="p">();</span>
    <span class="kt">void</span> <span class="nf">SetBool</span><span class="p">(</span><span class="k">const</span> <span class="n">std</span><span class="o">::</span><span class="n">string</span> <span class="o">&amp;</span><span class="n">name</span><span class="p">,</span> <span class="kt">bool</span> <span class="n">value</span><span class="p">)</span> <span class="k">const</span><span class="p">;</span>
    <span class="kt">void</span> <span class="nf">SetInt</span><span class="p">(</span><span class="k">const</span> <span class="n">std</span><span class="o">::</span><span class="n">string</span> <span class="o">&amp;</span><span class="n">name</span><span class="p">,</span> <span class="kt">int</span> <span class="n">value</span><span class="p">)</span> <span class="k">const</span><span class="p">;</span>
    <span class="kt">void</span> <span class="nf">SetFloat</span><span class="p">(</span><span class="k">const</span> <span class="n">std</span><span class="o">::</span><span class="n">string</span> <span class="o">&amp;</span><span class="n">name</span><span class="p">,</span> <span class="kt">float</span> <span class="n">value</span><span class="p">)</span> <span class="k">const</span><span class="p">;</span>
    <span class="kt">void</span> <span class="nf">SetVec2Float</span><span class="p">(</span><span class="k">const</span> <span class="n">std</span><span class="o">::</span><span class="n">string</span> <span class="o">&amp;</span><span class="n">name</span><span class="p">,</span> <span class="kt">float</span> <span class="n">v1</span><span class="p">,</span> <span class="kt">float</span> <span class="n">v2</span><span class="p">)</span> <span class="k">const</span><span class="p">;</span>
    <span class="kt">void</span> <span class="nf">SetVec2Float</span><span class="p">(</span><span class="k">const</span> <span class="n">std</span><span class="o">::</span><span class="n">string</span> <span class="o">&amp;</span><span class="n">name</span><span class="p">,</span> <span class="k">const</span> <span class="n">Vector2</span> <span class="o">&amp;</span><span class="n">value</span><span class="p">)</span> <span class="k">const</span><span class="p">;</span>
    <span class="kt">void</span> <span class="nf">SetVec3Float</span><span class="p">(</span><span class="k">const</span> <span class="n">std</span><span class="o">::</span><span class="n">string</span> <span class="o">&amp;</span><span class="n">name</span><span class="p">,</span> <span class="k">const</span> <span class="n">Color</span> <span class="o">&amp;</span><span class="n">value</span><span class="p">)</span> <span class="k">const</span><span class="p">;</span>
    <span class="kt">void</span> <span class="nf">SetVec3Float</span><span class="p">(</span><span class="k">const</span> <span class="n">std</span><span class="o">::</span><span class="n">string</span> <span class="o">&amp;</span><span class="n">name</span><span class="p">,</span> <span class="k">const</span> <span class="n">Vector3</span> <span class="o">&amp;</span><span class="n">value</span><span class="p">)</span> <span class="k">const</span><span class="p">;</span>
    <span class="kt">void</span> <span class="nf">SetVec3Float</span><span class="p">(</span><span class="k">const</span> <span class="n">std</span><span class="o">::</span><span class="n">string</span> <span class="o">&amp;</span><span class="n">name</span><span class="p">,</span> <span class="kt">float</span> <span class="n">v1</span><span class="p">,</span> <span class="kt">float</span> <span class="n">v2</span><span class="p">,</span> <span class="kt">float</span> <span class="n">v3</span><span class="p">)</span> <span class="k">const</span><span class="p">;</span>
    <span class="kt">void</span> <span class="nf">SetVec4Float</span><span class="p">(</span><span class="k">const</span> <span class="n">std</span><span class="o">::</span><span class="n">string</span> <span class="o">&amp;</span><span class="n">name</span><span class="p">,</span> <span class="kt">float</span> <span class="n">v1</span><span class="p">,</span> <span class="kt">float</span> <span class="n">v2</span><span class="p">,</span> <span class="kt">float</span> <span class="n">v3</span><span class="p">,</span> <span class="kt">float</span> <span class="n">v4</span><span class="p">)</span> <span class="k">const</span><span class="p">;</span>
    <span class="kt">void</span> <span class="nf">SetVec4Float</span><span class="p">(</span><span class="k">const</span> <span class="n">std</span><span class="o">::</span><span class="n">string</span> <span class="o">&amp;</span><span class="n">name</span><span class="p">,</span> <span class="k">const</span> <span class="n">Color</span> <span class="o">&amp;</span><span class="n">value</span><span class="p">)</span> <span class="k">const</span><span class="p">;</span>
    <span class="kt">void</span> <span class="nf">SetMatrix4Float</span><span class="p">(</span><span class="k">const</span> <span class="n">std</span><span class="o">::</span><span class="n">string</span> <span class="o">&amp;</span><span class="n">name</span><span class="p">,</span> <span class="k">const</span> <span class="n">Matrix4</span> <span class="o">&amp;</span><span class="n">mat</span><span class="p">)</span> <span class="k">const</span><span class="p">;</span>

  <span class="k">private</span><span class="o">:</span>
    <span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">ID</span><span class="p">;</span>
    <span class="n">Logger</span> <span class="o">*</span><span class="n">logger</span> <span class="o">=</span> <span class="k">nullptr</span><span class="p">;</span>

    <span class="kt">bool</span> <span class="nf">IsShaderFilesValid</span><span class="p">(</span><span class="k">const</span> <span class="n">std</span><span class="o">::</span><span class="n">string</span> <span class="o">&amp;</span><span class="n">vertexPath</span><span class="p">,</span> <span class="k">const</span> <span class="n">std</span><span class="o">::</span><span class="n">string</span> <span class="o">&amp;</span><span class="n">fragmentPath</span><span class="p">);</span>
    <span class="kt">void</span> <span class="nf">CheckCompileErrors</span><span class="p">(</span><span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">shader</span><span class="p">,</span> <span class="k">const</span> <span class="n">std</span><span class="o">::</span><span class="n">string</span> <span class="o">&amp;</span><span class="n">type</span><span class="p">);</span>
<span class="p">};</span>

<span class="cp">#endif </span><span class="c1">//SHADER_H</span>
</code></pre></div>
<div class="highlight"><pre><span></span><code><span class="cp">#include</span> <span class="cpf">"shader.h"</span><span class="cp"></span>

<span class="cp">#include</span> <span class="cpf">&lt;cassert&gt;</span><span class="cp"></span>

<span class="cp">#include</span> <span class="cpf">&lt;glm/gtc/type_ptr.hpp&gt;</span><span class="cp"></span>

<span class="cp">#include</span> <span class="cpf">"../utils/file_helper.h"</span><span class="cp"></span>

<span class="n">Shader</span><span class="o">::</span><span class="n">Shader</span><span class="p">()</span> <span class="o">:</span> <span class="n">logger</span><span class="p">(</span><span class="n">Logger</span><span class="o">::</span><span class="n">GetInstance</span><span class="p">())</span> <span class="p">{}</span>

<span class="n">Shader</span><span class="o">::</span><span class="n">Shader</span><span class="p">(</span><span class="k">const</span> <span class="n">std</span><span class="o">::</span><span class="n">string</span> <span class="o">&amp;</span><span class="n">vertexPath</span><span class="p">,</span> <span class="k">const</span> <span class="n">std</span><span class="o">::</span><span class="n">string</span> <span class="o">&amp;</span><span class="n">fragmentPath</span><span class="p">)</span> <span class="o">:</span> <span class="n">logger</span><span class="p">(</span><span class="n">Logger</span><span class="o">::</span><span class="n">GetInstance</span><span class="p">())</span> <span class="p">{</span>
    <span class="n">Compile</span><span class="p">(</span><span class="n">GetOpenGLShaderSourceFromPaths</span><span class="p">(</span><span class="n">vertexPath</span><span class="p">,</span> <span class="n">fragmentPath</span><span class="p">));</span>
<span class="p">}</span>

<span class="n">Shader</span><span class="o">::</span><span class="n">Shader</span><span class="p">(</span><span class="n">OpenGLShaderSourceCode</span> <span class="n">openGlShaderSourceCode</span><span class="p">)</span> <span class="o">:</span> <span class="n">logger</span><span class="p">(</span><span class="n">Logger</span><span class="o">::</span><span class="n">GetInstance</span><span class="p">())</span> <span class="p">{</span>
    <span class="n">Compile</span><span class="p">(</span><span class="n">openGlShaderSourceCode</span><span class="p">);</span>
<span class="p">}</span>

<span class="n">Shader</span><span class="o">::~</span><span class="n">Shader</span><span class="p">()</span> <span class="p">{}</span>

<span class="n">OpenGLShaderSourceCode</span> <span class="n">Shader</span><span class="o">::</span><span class="n">GetOpenGLShaderSourceFromPaths</span><span class="p">(</span><span class="k">const</span> <span class="n">std</span><span class="o">::</span><span class="n">string</span> <span class="o">&amp;</span><span class="n">vertexPath</span><span class="p">,</span> <span class="k">const</span> <span class="n">std</span><span class="o">::</span><span class="n">string</span> <span class="o">&amp;</span><span class="n">fragmentPath</span><span class="p">)</span> <span class="p">{</span>
    <span class="n">OpenGLShaderSourceCode</span> <span class="n">openGlShaderSourceCode</span><span class="p">;</span>
    <span class="k">if</span> <span class="p">(</span><span class="n">IsShaderFilesValid</span><span class="p">(</span><span class="n">vertexPath</span><span class="p">,</span> <span class="n">fragmentPath</span><span class="p">))</span> <span class="p">{</span>
        <span class="n">std</span><span class="o">::</span><span class="n">ifstream</span> <span class="n">vertexShaderFile</span><span class="p">;</span>
        <span class="n">std</span><span class="o">::</span><span class="n">ifstream</span> <span class="n">fragmentShaderFile</span><span class="p">;</span>
        <span class="n">vertexShaderFile</span><span class="p">.</span><span class="n">exceptions</span><span class="p">(</span><span class="n">std</span><span class="o">::</span><span class="n">ifstream</span><span class="o">::</span><span class="n">failbit</span> <span class="o">|</span> <span class="n">std</span><span class="o">::</span><span class="n">ifstream</span><span class="o">::</span><span class="n">badbit</span><span class="p">);</span>
        <span class="n">fragmentShaderFile</span><span class="p">.</span><span class="n">exceptions</span><span class="p">(</span><span class="n">std</span><span class="o">::</span><span class="n">ifstream</span><span class="o">::</span><span class="n">failbit</span> <span class="o">|</span> <span class="n">std</span><span class="o">::</span><span class="n">ifstream</span><span class="o">::</span><span class="n">badbit</span><span class="p">);</span>
        <span class="k">try</span> <span class="p">{</span>
            <span class="n">vertexShaderFile</span><span class="p">.</span><span class="n">open</span><span class="p">(</span><span class="n">vertexPath</span><span class="p">.</span><span class="n">c_str</span><span class="p">());</span>
            <span class="n">fragmentShaderFile</span><span class="p">.</span><span class="n">open</span><span class="p">(</span><span class="n">fragmentPath</span><span class="p">.</span><span class="n">c_str</span><span class="p">());</span>
            <span class="n">std</span><span class="o">::</span><span class="n">stringstream</span> <span class="n">vertexShaderStream</span><span class="p">,</span> <span class="n">fragmentShaderStream</span><span class="p">;</span>
            <span class="n">vertexShaderStream</span> <span class="o">&lt;&lt;</span> <span class="n">vertexShaderFile</span><span class="p">.</span><span class="n">rdbuf</span><span class="p">();</span>
            <span class="n">fragmentShaderStream</span> <span class="o">&lt;&lt;</span> <span class="n">fragmentShaderFile</span><span class="p">.</span><span class="n">rdbuf</span><span class="p">();</span>
            <span class="n">vertexShaderFile</span><span class="p">.</span><span class="n">close</span><span class="p">();</span>
            <span class="n">fragmentShaderFile</span><span class="p">.</span><span class="n">close</span><span class="p">();</span>
            <span class="n">openGlShaderSourceCode</span><span class="p">.</span><span class="n">vertex</span> <span class="o">=</span> <span class="n">vertexShaderStream</span><span class="p">.</span><span class="n">str</span><span class="p">();</span>
            <span class="n">openGlShaderSourceCode</span><span class="p">.</span><span class="n">fragment</span> <span class="o">=</span> <span class="n">fragmentShaderStream</span><span class="p">.</span><span class="n">str</span><span class="p">();</span>
        <span class="p">}</span> <span class="k">catch</span><span class="p">(</span><span class="n">std</span><span class="o">::</span><span class="n">ifstream</span><span class="o">::</span><span class="n">failure</span><span class="o">&amp;</span> <span class="n">e</span><span class="p">)</span> <span class="p">{</span>
            <span class="n">logger</span><span class="o">-&gt;</span><span class="n">Error</span><span class="p">(</span><span class="s">"Error reading shader files!</span><span class="se">\n</span><span class="s">"</span>
                          <span class="s">"vertex path = '%s'</span><span class="se">\n</span><span class="s">fragment path = '%s'!"</span><span class="p">,</span> <span class="n">vertexPath</span><span class="p">.</span><span class="n">c_str</span><span class="p">(),</span> <span class="n">fragmentPath</span><span class="p">.</span><span class="n">c_str</span><span class="p">());</span>
        <span class="p">}</span>
    <span class="p">}</span>
    <span class="k">return</span> <span class="n">openGlShaderSourceCode</span><span class="p">;</span>
<span class="p">}</span>

<span class="kt">void</span> <span class="n">Shader</span><span class="o">::</span><span class="n">Compile</span><span class="p">(</span><span class="n">OpenGLShaderSourceCode</span> <span class="n">openGlShaderSourceCode</span><span class="p">)</span> <span class="p">{</span>
    <span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">vertex</span><span class="p">,</span> <span class="n">fragment</span><span class="p">;</span>
    <span class="k">const</span> <span class="kt">char</span> <span class="o">*</span><span class="n">vertexSource</span> <span class="o">=</span> <span class="n">openGlShaderSourceCode</span><span class="p">.</span><span class="n">vertex</span><span class="p">.</span><span class="n">c_str</span><span class="p">();</span>
    <span class="k">const</span> <span class="kt">char</span> <span class="o">*</span><span class="n">fragmentSource</span> <span class="o">=</span> <span class="n">openGlShaderSourceCode</span><span class="p">.</span><span class="n">fragment</span><span class="p">.</span><span class="n">c_str</span><span class="p">();</span>
    <span class="c1">// vertex</span>
    <span class="n">vertex</span> <span class="o">=</span> <span class="n">glCreateShader</span><span class="p">(</span><span class="n">GL_VERTEX_SHADER</span><span class="p">);</span>
    <span class="n">glShaderSource</span><span class="p">(</span><span class="n">vertex</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="o">&amp;</span><span class="n">vertexSource</span><span class="p">,</span> <span class="k">nullptr</span><span class="p">);</span>
    <span class="n">glCompileShader</span><span class="p">(</span><span class="n">vertex</span><span class="p">);</span>
    <span class="n">CheckCompileErrors</span><span class="p">(</span><span class="n">vertex</span><span class="p">,</span> <span class="s">"VERTEX"</span><span class="p">);</span>
    <span class="c1">// fragment</span>
    <span class="n">fragment</span> <span class="o">=</span> <span class="n">glCreateShader</span><span class="p">(</span><span class="n">GL_FRAGMENT_SHADER</span><span class="p">);</span>
    <span class="n">glShaderSource</span><span class="p">(</span><span class="n">fragment</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="o">&amp;</span><span class="n">fragmentSource</span><span class="p">,</span> <span class="k">nullptr</span><span class="p">);</span>
    <span class="n">glCompileShader</span><span class="p">(</span><span class="n">fragment</span><span class="p">);</span>
    <span class="n">CheckCompileErrors</span><span class="p">(</span><span class="n">fragment</span><span class="p">,</span> <span class="s">"FRAGMENT"</span><span class="p">);</span>
    <span class="c1">// shader</span>
    <span class="n">ID</span> <span class="o">=</span> <span class="n">glCreateProgram</span><span class="p">();</span>
    <span class="n">glAttachShader</span><span class="p">(</span><span class="n">ID</span><span class="p">,</span> <span class="n">vertex</span><span class="p">);</span>
    <span class="n">glAttachShader</span><span class="p">(</span><span class="n">ID</span><span class="p">,</span> <span class="n">fragment</span><span class="p">);</span>
    <span class="n">glLinkProgram</span><span class="p">(</span><span class="n">ID</span><span class="p">);</span>
    <span class="n">CheckCompileErrors</span><span class="p">(</span><span class="n">ID</span><span class="p">,</span> <span class="s">"PROGRAM"</span><span class="p">);</span>
    <span class="n">glDeleteShader</span><span class="p">(</span><span class="n">vertex</span><span class="p">);</span>
    <span class="n">glDeleteShader</span><span class="p">(</span><span class="n">fragment</span><span class="p">);</span>
<span class="p">}</span>

<span class="kt">void</span> <span class="n">Shader</span><span class="o">::</span><span class="n">Use</span><span class="p">()</span> <span class="p">{</span>
    <span class="n">glUseProgram</span><span class="p">(</span><span class="n">ID</span><span class="p">);</span>
<span class="p">}</span>

<span class="kt">void</span> <span class="n">Shader</span><span class="o">::</span><span class="n">SetBool</span><span class="p">(</span><span class="k">const</span> <span class="n">std</span><span class="o">::</span><span class="n">string</span> <span class="o">&amp;</span><span class="n">name</span><span class="p">,</span> <span class="kt">bool</span> <span class="n">value</span><span class="p">)</span> <span class="k">const</span> <span class="p">{</span>
    <span class="n">glUniform1i</span><span class="p">(</span><span class="n">glGetUniformLocation</span><span class="p">(</span><span class="n">ID</span><span class="p">,</span> <span class="n">name</span><span class="p">.</span><span class="n">c_str</span><span class="p">()),</span> <span class="p">(</span><span class="kt">int</span><span class="p">)</span><span class="n">value</span><span class="p">);</span>
<span class="p">}</span>

<span class="kt">void</span> <span class="n">Shader</span><span class="o">::</span><span class="n">SetInt</span><span class="p">(</span><span class="k">const</span> <span class="n">std</span><span class="o">::</span><span class="n">string</span> <span class="o">&amp;</span><span class="n">name</span><span class="p">,</span> <span class="kt">int</span> <span class="n">value</span><span class="p">)</span> <span class="k">const</span> <span class="p">{</span>
    <span class="n">glUniform1i</span><span class="p">(</span><span class="n">glGetUniformLocation</span><span class="p">(</span><span class="n">ID</span><span class="p">,</span> <span class="n">name</span><span class="p">.</span><span class="n">c_str</span><span class="p">()),</span> <span class="n">value</span><span class="p">);</span>
<span class="p">}</span>

<span class="kt">void</span> <span class="n">Shader</span><span class="o">::</span><span class="n">SetFloat</span><span class="p">(</span><span class="k">const</span> <span class="n">std</span><span class="o">::</span><span class="n">string</span> <span class="o">&amp;</span><span class="n">name</span><span class="p">,</span> <span class="kt">float</span> <span class="n">value</span><span class="p">)</span> <span class="k">const</span> <span class="p">{</span>
    <span class="n">glUniform1f</span><span class="p">(</span><span class="n">glGetUniformLocation</span><span class="p">(</span><span class="n">ID</span><span class="p">,</span> <span class="n">name</span><span class="p">.</span><span class="n">c_str</span><span class="p">()),</span> <span class="n">value</span><span class="p">);</span>
<span class="p">}</span>

<span class="kt">void</span> <span class="n">Shader</span><span class="o">::</span><span class="n">SetVec2Float</span><span class="p">(</span><span class="k">const</span> <span class="n">std</span><span class="o">::</span><span class="n">string</span> <span class="o">&amp;</span><span class="n">name</span><span class="p">,</span> <span class="kt">float</span> <span class="n">v1</span><span class="p">,</span> <span class="kt">float</span> <span class="n">v2</span><span class="p">)</span> <span class="k">const</span> <span class="p">{</span>
    <span class="n">glUniform2f</span><span class="p">(</span><span class="n">glGetUniformLocation</span><span class="p">(</span><span class="k">this</span><span class="o">-&gt;</span><span class="n">ID</span><span class="p">,</span> <span class="n">name</span><span class="p">.</span><span class="n">c_str</span><span class="p">()),</span> <span class="n">v1</span><span class="p">,</span> <span class="n">v2</span><span class="p">);</span>
<span class="p">}</span>

<span class="kt">void</span> <span class="n">Shader</span><span class="o">::</span><span class="n">SetVec2Float</span><span class="p">(</span><span class="k">const</span> <span class="n">std</span><span class="o">::</span><span class="n">string</span> <span class="o">&amp;</span><span class="n">name</span><span class="p">,</span> <span class="k">const</span> <span class="n">Vector2</span> <span class="o">&amp;</span><span class="n">value</span><span class="p">)</span> <span class="k">const</span> <span class="p">{</span>
    <span class="n">glUniform2f</span><span class="p">(</span><span class="n">glGetUniformLocation</span><span class="p">(</span><span class="k">this</span><span class="o">-&gt;</span><span class="n">ID</span><span class="p">,</span> <span class="n">name</span><span class="p">.</span><span class="n">c_str</span><span class="p">()),</span> <span class="n">value</span><span class="p">.</span><span class="n">x</span><span class="p">,</span> <span class="n">value</span><span class="p">.</span><span class="n">y</span><span class="p">);</span>
<span class="p">}</span>

<span class="kt">void</span> <span class="n">Shader</span><span class="o">::</span><span class="n">SetVec3Float</span><span class="p">(</span><span class="k">const</span> <span class="n">std</span><span class="o">::</span><span class="n">string</span> <span class="o">&amp;</span><span class="n">name</span><span class="p">,</span> <span class="kt">float</span> <span class="n">v1</span><span class="p">,</span> <span class="kt">float</span> <span class="n">v2</span><span class="p">,</span> <span class="kt">float</span> <span class="n">v3</span><span class="p">)</span> <span class="k">const</span> <span class="p">{</span>
    <span class="n">glUniform3f</span><span class="p">(</span><span class="n">glGetUniformLocation</span><span class="p">(</span><span class="k">this</span><span class="o">-&gt;</span><span class="n">ID</span><span class="p">,</span> <span class="n">name</span><span class="p">.</span><span class="n">c_str</span><span class="p">()),</span> <span class="n">v1</span><span class="p">,</span> <span class="n">v2</span><span class="p">,</span> <span class="n">v3</span><span class="p">);</span>
<span class="p">}</span>

<span class="kt">void</span> <span class="n">Shader</span><span class="o">::</span><span class="n">SetVec3Float</span><span class="p">(</span><span class="k">const</span> <span class="n">std</span><span class="o">::</span><span class="n">string</span> <span class="o">&amp;</span><span class="n">name</span><span class="p">,</span> <span class="k">const</span> <span class="n">Color</span> <span class="o">&amp;</span><span class="n">value</span><span class="p">)</span> <span class="k">const</span> <span class="p">{</span>
    <span class="n">glUniform3f</span><span class="p">(</span><span class="n">glGetUniformLocation</span><span class="p">(</span><span class="k">this</span><span class="o">-&gt;</span><span class="n">ID</span><span class="p">,</span> <span class="n">name</span><span class="p">.</span><span class="n">c_str</span><span class="p">()),</span> <span class="n">value</span><span class="p">.</span><span class="n">r</span><span class="p">,</span> <span class="n">value</span><span class="p">.</span><span class="n">g</span><span class="p">,</span> <span class="n">value</span><span class="p">.</span><span class="n">b</span><span class="p">);</span>
<span class="p">}</span>

<span class="kt">void</span> <span class="n">Shader</span><span class="o">::</span><span class="n">SetVec3Float</span><span class="p">(</span><span class="k">const</span> <span class="n">std</span><span class="o">::</span><span class="n">string</span> <span class="o">&amp;</span><span class="n">name</span><span class="p">,</span> <span class="k">const</span> <span class="n">Vector3</span> <span class="o">&amp;</span><span class="n">value</span><span class="p">)</span> <span class="k">const</span> <span class="p">{</span>
    <span class="n">glUniform3f</span><span class="p">(</span><span class="n">glGetUniformLocation</span><span class="p">(</span><span class="k">this</span><span class="o">-&gt;</span><span class="n">ID</span><span class="p">,</span> <span class="n">name</span><span class="p">.</span><span class="n">c_str</span><span class="p">()),</span> <span class="n">value</span><span class="p">.</span><span class="n">x</span><span class="p">,</span> <span class="n">value</span><span class="p">.</span><span class="n">y</span><span class="p">,</span> <span class="n">value</span><span class="p">.</span><span class="n">z</span><span class="p">);</span>
<span class="p">}</span>

<span class="kt">void</span> <span class="n">Shader</span><span class="o">::</span><span class="n">SetVec4Float</span><span class="p">(</span><span class="k">const</span> <span class="n">std</span><span class="o">::</span><span class="n">string</span> <span class="o">&amp;</span><span class="n">name</span><span class="p">,</span> <span class="kt">float</span> <span class="n">v1</span><span class="p">,</span> <span class="kt">float</span> <span class="n">v2</span><span class="p">,</span> <span class="kt">float</span> <span class="n">v3</span><span class="p">,</span> <span class="kt">float</span> <span class="n">v4</span><span class="p">)</span> <span class="k">const</span> <span class="p">{</span>
    <span class="n">glUniform4f</span><span class="p">(</span><span class="n">glGetUniformLocation</span><span class="p">(</span><span class="k">this</span><span class="o">-&gt;</span><span class="n">ID</span><span class="p">,</span> <span class="n">name</span><span class="p">.</span><span class="n">c_str</span><span class="p">()),</span> <span class="n">v1</span><span class="p">,</span> <span class="n">v2</span><span class="p">,</span> <span class="n">v3</span><span class="p">,</span> <span class="n">v4</span><span class="p">);</span>
<span class="p">}</span>

<span class="kt">void</span> <span class="n">Shader</span><span class="o">::</span><span class="n">SetVec4Float</span><span class="p">(</span><span class="k">const</span> <span class="n">std</span><span class="o">::</span><span class="n">string</span> <span class="o">&amp;</span><span class="n">name</span><span class="p">,</span> <span class="k">const</span> <span class="n">Color</span> <span class="o">&amp;</span><span class="n">value</span><span class="p">)</span> <span class="k">const</span> <span class="p">{</span>
    <span class="n">glUniform4f</span><span class="p">(</span><span class="n">glGetUniformLocation</span><span class="p">(</span><span class="k">this</span><span class="o">-&gt;</span><span class="n">ID</span><span class="p">,</span> <span class="n">name</span><span class="p">.</span><span class="n">c_str</span><span class="p">()),</span> <span class="n">value</span><span class="p">.</span><span class="n">r</span><span class="p">,</span> <span class="n">value</span><span class="p">.</span><span class="n">g</span><span class="p">,</span> <span class="n">value</span><span class="p">.</span><span class="n">b</span><span class="p">,</span> <span class="n">value</span><span class="p">.</span><span class="n">a</span><span class="p">);</span>
<span class="p">}</span>

<span class="kt">void</span> <span class="n">Shader</span><span class="o">::</span><span class="n">SetMatrix4Float</span><span class="p">(</span><span class="k">const</span> <span class="n">std</span><span class="o">::</span><span class="n">string</span> <span class="o">&amp;</span><span class="n">name</span><span class="p">,</span> <span class="k">const</span> <span class="n">Matrix4</span> <span class="o">&amp;</span><span class="n">mat</span><span class="p">)</span> <span class="k">const</span> <span class="p">{</span>
    <span class="n">glUniformMatrix4fv</span><span class="p">(</span><span class="n">glGetUniformLocation</span><span class="p">(</span><span class="k">this</span><span class="o">-&gt;</span><span class="n">ID</span><span class="p">,</span> <span class="n">name</span><span class="p">.</span><span class="n">c_str</span><span class="p">()),</span> <span class="mi">1</span><span class="p">,</span> <span class="n">GL_FALSE</span><span class="p">,</span> <span class="n">glm</span><span class="o">::</span><span class="n">value_ptr</span><span class="p">(</span><span class="n">mat</span><span class="p">));</span>
<span class="p">}</span>

<span class="kt">bool</span> <span class="n">Shader</span><span class="o">::</span><span class="n">IsShaderFilesValid</span><span class="p">(</span><span class="k">const</span> <span class="n">std</span><span class="o">::</span><span class="n">string</span> <span class="o">&amp;</span><span class="n">vertexPath</span><span class="p">,</span> <span class="k">const</span> <span class="n">std</span><span class="o">::</span><span class="n">string</span> <span class="o">&amp;</span><span class="n">fragmentPath</span><span class="p">)</span> <span class="p">{</span>
    <span class="kt">bool</span> <span class="n">isValid</span> <span class="o">=</span> <span class="nb">true</span><span class="p">;</span>
    <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="n">FileHelper</span><span class="o">::</span><span class="n">DoesFileExist</span><span class="p">(</span><span class="n">vertexPath</span><span class="p">))</span> <span class="p">{</span>
        <span class="n">isValid</span> <span class="o">=</span> <span class="nb">false</span><span class="p">;</span>
        <span class="n">logger</span><span class="o">-&gt;</span><span class="n">Error</span><span class="p">(</span><span class="s">"Vertex file: %s doesn't exist!"</span><span class="p">,</span> <span class="n">vertexPath</span><span class="p">.</span><span class="n">c_str</span><span class="p">());</span>
    <span class="p">}</span>
    <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="n">FileHelper</span><span class="o">::</span><span class="n">DoesFileExist</span><span class="p">(</span><span class="n">fragmentPath</span><span class="p">))</span> <span class="p">{</span>
        <span class="n">isValid</span> <span class="o">=</span> <span class="nb">false</span><span class="p">;</span>
        <span class="n">logger</span><span class="o">-&gt;</span><span class="n">Error</span><span class="p">(</span><span class="s">"Vertex file: %s doesn't exist!"</span><span class="p">,</span> <span class="n">vertexPath</span><span class="p">.</span><span class="n">c_str</span><span class="p">());</span>
    <span class="p">}</span>
    <span class="k">return</span> <span class="n">isValid</span><span class="p">;</span>
<span class="p">}</span>

<span class="kt">void</span> <span class="n">Shader</span><span class="o">::</span><span class="n">CheckCompileErrors</span><span class="p">(</span><span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">shader</span><span class="p">,</span> <span class="k">const</span> <span class="n">std</span><span class="o">::</span><span class="n">string</span> <span class="o">&amp;</span><span class="n">type</span><span class="p">)</span> <span class="p">{</span>
    <span class="kt">int</span> <span class="n">success</span><span class="p">;</span>
    <span class="kt">char</span> <span class="n">infoLog</span><span class="p">[</span><span class="mi">1024</span><span class="p">];</span>
    <span class="k">if</span><span class="p">(</span><span class="n">type</span> <span class="o">==</span> <span class="s">"PROGRAM"</span><span class="p">)</span> <span class="p">{</span>
        <span class="n">glGetProgramiv</span><span class="p">(</span><span class="n">shader</span><span class="p">,</span> <span class="n">GL_LINK_STATUS</span><span class="p">,</span> <span class="o">&amp;</span><span class="n">success</span><span class="p">);</span>
        <span class="k">if</span><span class="p">(</span><span class="o">!</span><span class="n">success</span><span class="p">)</span> <span class="p">{</span>
            <span class="n">glGetProgramInfoLog</span><span class="p">(</span><span class="n">shader</span><span class="p">,</span> <span class="mi">1024</span><span class="p">,</span> <span class="k">nullptr</span><span class="p">,</span> <span class="n">infoLog</span><span class="p">);</span>
            <span class="n">logger</span><span class="o">-&gt;</span><span class="n">Error</span><span class="p">(</span><span class="s">"Shader type '%s' linking failed!</span><span class="se">\n</span><span class="s">%s"</span><span class="p">,</span> <span class="n">type</span><span class="p">.</span><span class="n">c_str</span><span class="p">(),</span> <span class="n">infoLog</span><span class="p">);</span>
        <span class="p">}</span>
    <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
        <span class="n">glGetShaderiv</span><span class="p">(</span><span class="n">shader</span><span class="p">,</span> <span class="n">GL_COMPILE_STATUS</span><span class="p">,</span> <span class="o">&amp;</span><span class="n">success</span><span class="p">);</span>
        <span class="k">if</span><span class="p">(</span><span class="o">!</span><span class="n">success</span><span class="p">)</span> <span class="p">{</span>
            <span class="n">glGetShaderInfoLog</span><span class="p">(</span><span class="n">shader</span><span class="p">,</span> <span class="mi">1024</span><span class="p">,</span> <span class="k">nullptr</span><span class="p">,</span> <span class="n">infoLog</span><span class="p">);</span>
            <span class="n">logger</span><span class="o">-&gt;</span><span class="n">Error</span><span class="p">(</span><span class="s">"Shader type '%s' compilation failed!</span><span class="se">\n</span><span class="s">%s"</span><span class="p">,</span> <span class="n">type</span><span class="p">.</span><span class="n">c_str</span><span class="p">(),</span> <span class="n">infoLog</span><span class="p">);</span>
        <span class="p">}</span>
    <span class="p">}</span>
<span class="p">}</span>
</code></pre></div>
<p>First, the <code>OpenGLShaderSourceCode</code> struct is used to hold a string representation of the shader code.  The <code>Shader</code> class has two constructors, one that accepts <code>OpenGLShaderSourceCode</code> and another that accepts the file paths of the vertex and fragment shaders file paths as parameters which we won't use for this tutorial series.</p>
<p>The <code>Compile</code> function compiles the vertex and fragment shaders, attaches the shader objects to the shader program, and links the shader program.  We will call the <code>Use</code> function whenever we need to install a shader for use which we'll see an example of later.  Other than that, the last thing to mention is the multiple <code>Set$TYPE</code> functions.  These are used to set <a href="https://www.khronos.org/opengl/wiki/Uniform_(GLSL)">uniform variables</a> within the shaders and we will see how they are used in the next section.</p>
<h3 id="spriterenderer">SpriteRenderer</h3>
<div class="highlight"><pre><span></span><code><span class="cp">#ifndef SPRITE_RENDERER_H</span>
<span class="cp">#define SPRITE_RENDERER_H</span>

<span class="cp">#include</span> <span class="cpf">&lt;glad/glad.h&gt;</span><span class="cp"></span>

<span class="cp">#include</span> <span class="cpf">"./re/rendering/shader.h"</span><span class="cp"></span>
<span class="cp">#include</span> <span class="cpf">"./re/rendering/texture.h"</span><span class="cp"></span>
<span class="cp">#include</span> <span class="cpf">"./re/rendering/color.h"</span><span class="cp"></span>
<span class="cp">#include</span> <span class="cpf">"./re/math/math.h"</span><span class="cp"></span>

<span class="cp">#include</span> <span class="cpf">"project_properties.h"</span><span class="cp"></span>

<span class="k">static</span> <span class="k">const</span> <span class="n">std</span><span class="o">::</span><span class="n">string</span> <span class="o">&amp;</span><span class="n">OPENGL_SHADER_SOURCE_VERTEX_SPRITE</span> <span class="o">=</span>
        <span class="s">"#version 330 core</span><span class="se">\n</span><span class="s">"</span>
        <span class="s">"</span><span class="se">\n</span><span class="s">"</span>
        <span class="s">"layout (location = 0) in vec4 vertex;</span><span class="se">\n</span><span class="s">"</span>
        <span class="s">"</span><span class="se">\n</span><span class="s">"</span>
        <span class="s">"out vec2 texCoord;</span><span class="se">\n</span><span class="s">"</span>
        <span class="s">"</span><span class="se">\n</span><span class="s">"</span>
        <span class="s">"uniform mat4 projection;</span><span class="se">\n</span><span class="s">"</span>
        <span class="s">"uniform mat4 model;</span><span class="se">\n</span><span class="s">"</span>
        <span class="s">"</span><span class="se">\n</span><span class="s">"</span>
        <span class="s">"void main() {</span><span class="se">\n</span><span class="s">"</span>
        <span class="s">"    texCoord = vertex.zw;</span><span class="se">\n</span><span class="s">"</span>
        <span class="s">"    gl_Position = projection * model * vec4(vertex.xy, 0.0f, 1.0f);</span><span class="se">\n</span><span class="s">"</span>
        <span class="s">"}</span><span class="se">\n</span><span class="s">"</span>
        <span class="s">""</span><span class="p">;</span>

<span class="k">static</span> <span class="k">const</span> <span class="n">std</span><span class="o">::</span><span class="n">string</span> <span class="o">&amp;</span><span class="n">OPENGL_SHADER_SOURCE_FRAGMENT_SPRITE</span> <span class="o">=</span>
        <span class="s">"#version 330 core</span><span class="se">\n</span><span class="s">"</span>
        <span class="s">"</span><span class="se">\n</span><span class="s">"</span>
        <span class="s">"in vec2 texCoord;</span><span class="se">\n</span><span class="s">"</span>
        <span class="s">"out vec4 color;</span><span class="se">\n</span><span class="s">"</span>
        <span class="s">"</span><span class="se">\n</span><span class="s">"</span>
        <span class="s">"uniform sampler2D sprite;</span><span class="se">\n</span><span class="s">"</span>
        <span class="s">"uniform vec4 spriteColor;</span><span class="se">\n</span><span class="s">"</span>
        <span class="s">"</span><span class="se">\n</span><span class="s">"</span>
        <span class="s">"void main() {</span><span class="se">\n</span><span class="s">"</span>
        <span class="s">"    color = spriteColor * texture(sprite, texCoord);</span><span class="se">\n</span><span class="s">"</span>
        <span class="s">"}</span><span class="se">\n</span><span class="s">"</span>
        <span class="s">""</span><span class="p">;</span>

<span class="k">static</span> <span class="k">const</span> <span class="n">OpenGLShaderSourceCode</span> <span class="n">OPENGL_SHADER_SOURCE_SPRITE</span> <span class="o">=</span> <span class="n">OpenGLShaderSourceCode</span><span class="p">{</span>
    <span class="p">.</span><span class="n">vertex</span> <span class="o">=</span> <span class="n">OPENGL_SHADER_SOURCE_VERTEX_SPRITE</span><span class="p">,</span>
    <span class="p">.</span><span class="n">fragment</span> <span class="o">=</span> <span class="n">OPENGL_SHADER_SOURCE_FRAGMENT_SPRITE</span>
<span class="p">};</span>

<span class="k">class</span> <span class="nc">SpriteRenderer</span> <span class="p">{</span>
  <span class="k">public</span><span class="o">:</span>
    <span class="n">SpriteRenderer</span><span class="p">();</span>
    <span class="kt">void</span> <span class="nf">Draw</span><span class="p">(</span><span class="n">Texture</span> <span class="o">*</span><span class="n">texture2D</span><span class="p">,</span> <span class="k">const</span> <span class="n">Rect2</span> <span class="o">&amp;</span><span class="n">sourceRectangle</span><span class="p">,</span> <span class="k">const</span> <span class="n">Rect2</span> <span class="o">&amp;</span><span class="n">destinationRectangle</span><span class="p">,</span> <span class="kt">float</span> <span class="n">rotation</span><span class="p">,</span>
            <span class="k">const</span> <span class="n">Color</span> <span class="o">&amp;</span><span class="n">color</span><span class="p">,</span> <span class="kt">bool</span> <span class="n">flipX</span><span class="p">,</span> <span class="kt">bool</span> <span class="n">flipY</span><span class="p">);</span>

  <span class="k">private</span><span class="o">:</span>
    <span class="n">Shader</span> <span class="n">shader</span><span class="p">;</span>
    <span class="n">GLuint</span> <span class="n">quadVAO</span><span class="p">;</span>
    <span class="n">GLuint</span> <span class="n">quadVBO</span><span class="p">;</span>
    <span class="n">ProjectProperties</span> <span class="o">*</span><span class="n">projectProperties</span> <span class="o">=</span> <span class="k">nullptr</span><span class="p">;</span>
<span class="p">};</span>

<span class="cp">#endif </span><span class="c1">//SPRITE_RENDERER_H</span>
</code></pre></div>
<div class="highlight"><pre><span></span><code><span class="cp">#include</span> <span class="cpf">"sprite_renderer.h"</span><span class="cp"></span>

<span class="cp">#include</span> <span class="cpf">&lt;glm/gtc/matrix_transform.hpp&gt;</span><span class="cp"></span>

<span class="n">SpriteRenderer</span><span class="o">::</span><span class="n">SpriteRenderer</span><span class="p">()</span> <span class="o">:</span> <span class="n">projectProperties</span><span class="p">(</span><span class="n">ProjectProperties</span><span class="o">::</span><span class="n">GetInstance</span><span class="p">())</span> <span class="p">{</span>
    <span class="n">GLfloat</span> <span class="n">vertices</span><span class="p">[]</span> <span class="o">=</span> <span class="p">{</span>
        <span class="c1">// positions // texture coordinates</span>
        <span class="mf">0.0f</span><span class="p">,</span> <span class="mf">1.0f</span><span class="p">,</span> <span class="mf">0.0f</span><span class="p">,</span> <span class="mf">1.0f</span><span class="p">,</span>
        <span class="mf">1.0f</span><span class="p">,</span> <span class="mf">0.0f</span><span class="p">,</span> <span class="mf">1.0f</span><span class="p">,</span> <span class="mf">0.0f</span><span class="p">,</span>
        <span class="mf">0.0f</span><span class="p">,</span> <span class="mf">0.0f</span><span class="p">,</span> <span class="mf">0.0f</span><span class="p">,</span> <span class="mf">0.0f</span><span class="p">,</span>

        <span class="mf">0.0f</span><span class="p">,</span> <span class="mf">1.0f</span><span class="p">,</span> <span class="mf">0.0f</span><span class="p">,</span> <span class="mf">1.0f</span><span class="p">,</span>
        <span class="mf">1.0f</span><span class="p">,</span> <span class="mf">1.0f</span><span class="p">,</span> <span class="mf">1.0f</span><span class="p">,</span> <span class="mf">1.0f</span><span class="p">,</span>
        <span class="mf">1.0f</span><span class="p">,</span> <span class="mf">0.0f</span><span class="p">,</span> <span class="mf">1.0f</span><span class="p">,</span> <span class="mf">0.0f</span>
    <span class="p">};</span>

    <span class="n">glGenVertexArrays</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="o">&amp;</span><span class="n">quadVAO</span><span class="p">);</span>
    <span class="n">glGenBuffers</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="o">&amp;</span><span class="n">quadVBO</span><span class="p">);</span>

    <span class="n">glBindBuffer</span><span class="p">(</span><span class="n">GL_ARRAY_BUFFER</span><span class="p">,</span> <span class="n">quadVBO</span><span class="p">);</span>
    <span class="n">glBufferData</span><span class="p">(</span><span class="n">GL_ARRAY_BUFFER</span><span class="p">,</span> <span class="k">sizeof</span><span class="p">(</span><span class="n">vertices</span><span class="p">),</span> <span class="n">vertices</span><span class="p">,</span> <span class="n">GL_STATIC_DRAW</span><span class="p">);</span>

    <span class="n">glBindVertexArray</span><span class="p">(</span><span class="n">quadVAO</span><span class="p">);</span>
    <span class="n">glEnableVertexAttribArray</span><span class="p">(</span><span class="mi">0</span><span class="p">);</span>
    <span class="n">glVertexAttribPointer</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="n">GL_FLOAT</span><span class="p">,</span> <span class="n">GL_FALSE</span><span class="p">,</span> <span class="mi">4</span> <span class="o">*</span> <span class="k">sizeof</span><span class="p">(</span><span class="n">GLfloat</span><span class="p">),</span> <span class="p">(</span><span class="kt">void</span><span class="o">*</span><span class="p">)</span> <span class="k">nullptr</span><span class="p">);</span>
    <span class="n">glBindBuffer</span><span class="p">(</span><span class="n">GL_ARRAY_BUFFER</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>
    <span class="n">glBindVertexArray</span><span class="p">(</span><span class="mi">0</span><span class="p">);</span>

    <span class="n">shader</span> <span class="o">=</span> <span class="n">Shader</span><span class="p">(</span><span class="n">OPENGL_SHADER_SOURCE_SPRITE</span><span class="p">);</span>
    <span class="n">shader</span><span class="p">.</span><span class="n">Use</span><span class="p">();</span>
    <span class="n">shader</span><span class="p">.</span><span class="n">SetInt</span><span class="p">(</span><span class="s">"sprite"</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>
    <span class="n">Matrix4</span> <span class="n">projection</span> <span class="o">=</span> <span class="n">glm</span><span class="o">::</span><span class="n">ortho</span><span class="p">(</span><span class="mf">0.0f</span><span class="p">,</span> <span class="k">static_cast</span><span class="o">&lt;</span><span class="kt">float</span><span class="o">&gt;</span><span class="p">(</span><span class="n">projectProperties</span><span class="o">-&gt;</span><span class="n">GetWindowWidth</span><span class="p">()),</span> <span class="k">static_cast</span><span class="o">&lt;</span><span class="kt">float</span><span class="o">&gt;</span><span class="p">(</span><span class="n">projectProperties</span><span class="o">-&gt;</span><span class="n">GetWindowHeight</span><span class="p">()),</span> <span class="mf">0.0f</span><span class="p">,</span> <span class="mf">-1.0f</span><span class="p">,</span> <span class="mf">1.0f</span><span class="p">);</span>
    <span class="n">shader</span><span class="p">.</span><span class="n">SetMatrix4Float</span><span class="p">(</span><span class="s">"projection"</span><span class="p">,</span> <span class="n">projection</span><span class="p">);</span>
<span class="p">}</span>

<span class="kt">void</span>
<span class="n">SpriteRenderer</span><span class="o">::</span><span class="n">Draw</span><span class="p">(</span><span class="n">Texture</span> <span class="o">*</span><span class="n">texture2D</span><span class="p">,</span> <span class="k">const</span> <span class="n">Rect2</span> <span class="o">&amp;</span><span class="n">sourceRectangle</span><span class="p">,</span> <span class="k">const</span> <span class="n">Rect2</span> <span class="o">&amp;</span><span class="n">destinationRectangle</span><span class="p">,</span> <span class="kt">float</span> <span class="n">rotation</span><span class="p">,</span> <span class="k">const</span> <span class="n">Color</span> <span class="o">&amp;</span><span class="n">color</span><span class="p">,</span>
                     <span class="kt">bool</span> <span class="n">flipX</span><span class="p">,</span> <span class="kt">bool</span> <span class="n">flipY</span><span class="p">)</span> <span class="p">{</span>
    <span class="c1">// 1. Translation</span>
    <span class="n">Matrix4</span> <span class="n">model</span> <span class="o">=</span> <span class="n">glm</span><span class="o">::</span><span class="n">mat4</span><span class="p">(</span><span class="mf">1.0f</span><span class="p">);</span>
    <span class="n">model</span> <span class="o">=</span> <span class="n">glm</span><span class="o">::</span><span class="n">translate</span><span class="p">(</span><span class="n">model</span><span class="p">,</span> <span class="n">glm</span><span class="o">::</span><span class="n">vec3</span><span class="p">(</span><span class="n">destinationRectangle</span><span class="p">.</span><span class="n">x</span><span class="p">,</span> <span class="n">destinationRectangle</span><span class="p">.</span><span class="n">y</span><span class="p">,</span> <span class="mf">0.0f</span><span class="p">));</span>  <span class="c1">// first translate (transformations are: scale happens first, then rotation, and then final translation happens; reversed order)</span>
    <span class="c1">// 2. Rotation</span>
    <span class="n">model</span> <span class="o">=</span> <span class="n">glm</span><span class="o">::</span><span class="n">translate</span><span class="p">(</span><span class="n">model</span><span class="p">,</span> <span class="n">Vector3</span><span class="p">(</span><span class="mf">0.5f</span> <span class="o">*</span> <span class="n">destinationRectangle</span><span class="p">.</span><span class="n">w</span><span class="p">,</span> <span class="mf">0.5f</span> <span class="o">*</span> <span class="n">destinationRectangle</span><span class="p">.</span><span class="n">h</span><span class="p">,</span> <span class="mf">0.0f</span><span class="p">));</span> <span class="c1">// move origin of rotation to center of quad</span>
    <span class="n">model</span> <span class="o">=</span> <span class="n">glm</span><span class="o">::</span><span class="n">rotate</span><span class="p">(</span><span class="n">model</span><span class="p">,</span> <span class="n">glm</span><span class="o">::</span><span class="n">radians</span><span class="p">(</span><span class="n">rotation</span><span class="p">),</span> <span class="n">Vector3</span><span class="p">(</span><span class="mf">0.0f</span><span class="p">,</span> <span class="mf">0.0f</span><span class="p">,</span> <span class="mf">1.0f</span><span class="p">));</span> <span class="c1">// then rotate</span>
    <span class="n">model</span> <span class="o">=</span> <span class="n">glm</span><span class="o">::</span><span class="n">translate</span><span class="p">(</span><span class="n">model</span><span class="p">,</span> <span class="n">Vector3</span><span class="p">(</span><span class="mf">-0.5f</span> <span class="o">*</span> <span class="n">destinationRectangle</span><span class="p">.</span><span class="n">w</span><span class="p">,</span> <span class="mf">-0.5f</span> <span class="o">*</span> <span class="n">destinationRectangle</span><span class="p">.</span><span class="n">h</span><span class="p">,</span> <span class="mf">0.0f</span><span class="p">));</span> <span class="c1">// move origin back</span>
    <span class="c1">// 3. Scaling</span>
    <span class="n">model</span> <span class="o">=</span> <span class="n">glm</span><span class="o">::</span><span class="n">scale</span><span class="p">(</span><span class="n">model</span><span class="p">,</span> <span class="n">Vector3</span><span class="p">(</span><span class="n">destinationRectangle</span><span class="p">.</span><span class="n">w</span><span class="p">,</span> <span class="n">destinationRectangle</span><span class="p">.</span><span class="n">h</span><span class="p">,</span> <span class="mf">1.0f</span><span class="p">));</span> <span class="c1">// last scale</span>

    <span class="n">glBindVertexArray</span><span class="p">(</span><span class="n">quadVAO</span><span class="p">);</span>
    <span class="n">glBindBuffer</span><span class="p">(</span><span class="n">GL_ARRAY_BUFFER</span><span class="p">,</span> <span class="n">quadVBO</span><span class="p">);</span>

    <span class="n">shader</span><span class="p">.</span><span class="n">Use</span><span class="p">();</span>
    <span class="n">shader</span><span class="p">.</span><span class="n">SetMatrix4Float</span><span class="p">(</span><span class="s">"model"</span><span class="p">,</span> <span class="n">model</span><span class="p">);</span>
    <span class="n">shader</span><span class="p">.</span><span class="n">SetVec4Float</span><span class="p">(</span><span class="s">"spriteColor"</span><span class="p">,</span> <span class="n">color</span><span class="p">.</span><span class="n">r</span><span class="p">,</span> <span class="n">color</span><span class="p">.</span><span class="n">g</span><span class="p">,</span> <span class="n">color</span><span class="p">.</span><span class="n">b</span><span class="p">,</span> <span class="n">color</span><span class="p">.</span><span class="n">a</span><span class="p">);</span>

    <span class="n">glActiveTexture</span><span class="p">(</span><span class="n">GL_TEXTURE0</span><span class="p">);</span>
    <span class="n">texture2D</span><span class="o">-&gt;</span><span class="n">Bind</span><span class="p">();</span>

    <span class="c1">// render subimage based on source rectangle</span>
    <span class="n">glPixelStorei</span><span class="p">(</span><span class="n">GL_UNPACK_ROW_LENGTH</span><span class="p">,</span> <span class="n">texture2D</span><span class="o">-&gt;</span><span class="n">GetWidth</span><span class="p">());</span>
    <span class="n">glPixelStorei</span><span class="p">(</span><span class="n">GL_UNPACK_SKIP_PIXELS</span><span class="p">,</span> <span class="n">sourceRectangle</span><span class="p">.</span><span class="n">x</span><span class="p">);</span>
    <span class="n">glPixelStorei</span><span class="p">(</span><span class="n">GL_UNPACK_SKIP_ROWS</span><span class="p">,</span> <span class="n">sourceRectangle</span><span class="p">.</span><span class="n">y</span><span class="p">);</span>

    <span class="n">glTexImage2D</span><span class="p">(</span><span class="n">GL_TEXTURE_2D</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="n">GL_RGBA</span><span class="p">,</span> <span class="n">sourceRectangle</span><span class="p">.</span><span class="n">w</span><span class="p">,</span> <span class="n">sourceRectangle</span><span class="p">.</span><span class="n">h</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="n">texture2D</span><span class="o">-&gt;</span><span class="n">GetImageFormat</span><span class="p">(),</span> <span class="n">GL_UNSIGNED_BYTE</span><span class="p">,</span> <span class="n">texture2D</span><span class="o">-&gt;</span><span class="n">GetData</span><span class="p">());</span>

    <span class="n">glPixelStorei</span><span class="p">(</span><span class="n">GL_UNPACK_ROW_LENGTH</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>
    <span class="n">glPixelStorei</span><span class="p">(</span><span class="n">GL_UNPACK_SKIP_PIXELS</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>
    <span class="n">glPixelStorei</span><span class="p">(</span><span class="n">GL_UNPACK_SKIP_ROWS</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>

    <span class="c1">// Render Container</span>
    <span class="n">GLfloat</span> <span class="n">vertices</span><span class="p">[</span><span class="mi">6</span><span class="p">][</span><span class="mi">4</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span>
            <span class="c1">// positions // texture coordinates</span>
            <span class="mf">0.0f</span><span class="p">,</span> <span class="mf">1.0f</span><span class="p">,</span> <span class="mf">0.0f</span><span class="p">,</span> <span class="mf">1.0f</span><span class="p">,</span>
            <span class="mf">1.0f</span><span class="p">,</span> <span class="mf">0.0f</span><span class="p">,</span> <span class="mf">1.0f</span><span class="p">,</span> <span class="mf">0.0f</span><span class="p">,</span>
            <span class="mf">0.0f</span><span class="p">,</span> <span class="mf">0.0f</span><span class="p">,</span> <span class="mf">0.0f</span><span class="p">,</span> <span class="mf">0.0f</span><span class="p">,</span>

            <span class="mf">0.0f</span><span class="p">,</span> <span class="mf">1.0f</span><span class="p">,</span> <span class="mf">0.0f</span><span class="p">,</span> <span class="mf">1.0f</span><span class="p">,</span>
            <span class="mf">1.0f</span><span class="p">,</span> <span class="mf">1.0f</span><span class="p">,</span> <span class="mf">1.0f</span><span class="p">,</span> <span class="mf">1.0f</span><span class="p">,</span>
            <span class="mf">1.0f</span><span class="p">,</span> <span class="mf">0.0f</span><span class="p">,</span> <span class="mf">1.0f</span><span class="p">,</span> <span class="mf">0.0f</span>
    <span class="p">};</span>

    <span class="k">static</span> <span class="k">const</span> <span class="kt">int</span> <span class="n">VERT_X</span> <span class="o">=</span> <span class="mi">2</span><span class="p">;</span>
    <span class="k">static</span> <span class="k">const</span> <span class="kt">int</span> <span class="n">VERT_Y</span> <span class="o">=</span> <span class="mi">3</span><span class="p">;</span>
    <span class="k">if</span> <span class="p">(</span><span class="n">flipX</span><span class="p">)</span> <span class="p">{</span>
        <span class="n">vertices</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="n">VERT_X</span><span class="p">]</span> <span class="o">=</span> <span class="mf">1.0f</span><span class="p">;</span>
        <span class="n">vertices</span><span class="p">[</span><span class="mi">1</span><span class="p">][</span><span class="n">VERT_X</span><span class="p">]</span> <span class="o">=</span> <span class="mf">0.0f</span><span class="p">;</span>
        <span class="n">vertices</span><span class="p">[</span><span class="mi">2</span><span class="p">][</span><span class="n">VERT_X</span><span class="p">]</span> <span class="o">=</span> <span class="mf">1.0f</span><span class="p">;</span>
        <span class="n">vertices</span><span class="p">[</span><span class="mi">3</span><span class="p">][</span><span class="n">VERT_X</span><span class="p">]</span> <span class="o">=</span> <span class="mf">1.0f</span><span class="p">;</span>
        <span class="n">vertices</span><span class="p">[</span><span class="mi">4</span><span class="p">][</span><span class="n">VERT_X</span><span class="p">]</span> <span class="o">=</span> <span class="mf">0.0f</span><span class="p">;</span>
        <span class="n">vertices</span><span class="p">[</span><span class="mi">5</span><span class="p">][</span><span class="n">VERT_X</span><span class="p">]</span> <span class="o">=</span> <span class="mf">0.0f</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="k">if</span> <span class="p">(</span><span class="n">flipY</span><span class="p">)</span> <span class="p">{</span>
        <span class="n">vertices</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="n">VERT_Y</span><span class="p">]</span> <span class="o">=</span> <span class="mf">0.0f</span><span class="p">;</span>
        <span class="n">vertices</span><span class="p">[</span><span class="mi">1</span><span class="p">][</span><span class="n">VERT_Y</span><span class="p">]</span> <span class="o">=</span> <span class="mf">1.0f</span><span class="p">;</span>
        <span class="n">vertices</span><span class="p">[</span><span class="mi">2</span><span class="p">][</span><span class="n">VERT_Y</span><span class="p">]</span> <span class="o">=</span> <span class="mf">1.0f</span><span class="p">;</span>
        <span class="n">vertices</span><span class="p">[</span><span class="mi">3</span><span class="p">][</span><span class="n">VERT_Y</span><span class="p">]</span> <span class="o">=</span> <span class="mf">0.0f</span><span class="p">;</span>
        <span class="n">vertices</span><span class="p">[</span><span class="mi">4</span><span class="p">][</span><span class="n">VERT_Y</span><span class="p">]</span> <span class="o">=</span> <span class="mf">0.0f</span><span class="p">;</span>
        <span class="n">vertices</span><span class="p">[</span><span class="mi">5</span><span class="p">][</span><span class="n">VERT_Y</span><span class="p">]</span> <span class="o">=</span> <span class="mf">1.0f</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="n">glBufferSubData</span><span class="p">(</span><span class="n">GL_ARRAY_BUFFER</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="k">sizeof</span><span class="p">(</span><span class="n">vertices</span><span class="p">),</span> <span class="n">vertices</span><span class="p">);</span>
    <span class="n">glDrawArrays</span><span class="p">(</span><span class="n">GL_TRIANGLES</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">6</span><span class="p">);</span>

    <span class="n">glBindVertexArray</span><span class="p">(</span><span class="mi">0</span><span class="p">);</span>
<span class="p">}</span>
</code></pre></div>
<h4 id="shader-code">Shader Code</h4>
<p>Vertex</p>
<div class="highlight"><pre><span></span><code><span class="cp">#version 330 core</span>

<span class="k">layout</span> <span class="p">(</span><span class="n">location</span> <span class="o">=</span> <span class="mo">0</span><span class="p">)</span> <span class="k">in</span> <span class="kt">vec4</span> <span class="n">vertex</span><span class="p">;</span>

<span class="k">out</span> <span class="kt">vec2</span> <span class="n">texCoord</span>

<span class="k">uniform</span> <span class="kt">mat4</span> <span class="n">projection</span><span class="p">;</span>
<span class="k">uniform</span> <span class="kt">mat4</span> <span class="n">model</span><span class="p">;</span>

<span class="kt">void</span> <span class="n">main</span><span class="p">()</span> <span class="p">{</span>
    <span class="n">texCoord</span> <span class="o">=</span> <span class="n">vertex</span><span class="p">.</span><span class="n">zw</span><span class="p">;</span>
    <span class="nb">gl_Position</span> <span class="o">=</span> <span class="n">projection</span> <span class="o">*</span> <span class="n">model</span> <span class="o">*</span> <span class="kt">vec4</span><span class="p">(</span><span class="n">vertex</span><span class="p">.</span><span class="n">xy</span><span class="p">,</span> <span class="mf">0.0</span><span class="n">f</span><span class="p">,</span> <span class="mf">1.0</span><span class="n">f</span><span class="p">);</span>
<span class="p">}</span>
</code></pre></div>
<p>Fragment</p>
<div class="highlight"><pre><span></span><code><span class="cp">#version 330 core</span>

<span class="k">in</span> <span class="kt">vec2</span> <span class="n">texCoord</span><span class="p">;</span>
<span class="k">out</span> <span class="kt">vec4</span> <span class="n">color</span><span class="p">;</span>

<span class="k">uniform</span> <span class="kt">sampler2D</span> <span class="n">sprite</span><span class="p">;</span>
<span class="k">uniform</span> <span class="kt">vec4</span> <span class="n">spriteColor</span><span class="p">;</span>

<span class="kt">void</span> <span class="n">main</span><span class="p">()</span> <span class="p">{</span>
    <span class="n">color</span> <span class="o">=</span> <span class="n">spriteColor</span> <span class="o">*</span> <span class="n">texture</span><span class="p">(</span><span class="n">sprite</span><span class="p">,</span> <span class="n">texCoord</span><span class="p">);</span>
<span class="p">}</span>
</code></pre></div>
<h4 id="spriterenderer-class">SpriteRenderer Class</h4>
<p>Explanation coming soon...</p>
<h3 id="renderer2d">Renderer2D</h3>
<div class="highlight"><pre><span></span><code><span class="cp">#ifndef RENDERER_2D_H</span>
<span class="cp">#define RENDERER_2D_H</span>

<span class="cp">#include</span> <span class="cpf">"renderer_batcher.h"</span><span class="cp"></span>
<span class="cp">#include</span> <span class="cpf">"sprite_renderer.h"</span><span class="cp"></span>

<span class="k">class</span> <span class="nc">Renderer2D</span> <span class="p">{</span>
  <span class="k">public</span><span class="o">:</span>
    <span class="n">Renderer2D</span><span class="p">()</span> <span class="o">=</span> <span class="k">default</span><span class="p">;</span>
    <span class="o">~</span><span class="n">Renderer2D</span><span class="p">();</span>
    <span class="kt">void</span> <span class="nf">Initialize</span><span class="p">();</span>
    <span class="kt">void</span> <span class="nf">SubmitSpriteBatchItem</span><span class="p">(</span><span class="n">Texture</span> <span class="o">*</span><span class="n">texture2D</span><span class="p">,</span> <span class="n">Rect2</span> <span class="n">sourceRectangle</span><span class="p">,</span> <span class="n">Rect2</span> <span class="n">destinationRectangle</span><span class="p">,</span> <span class="kt">int</span> <span class="n">zIndex</span><span class="p">,</span> <span class="kt">float</span> <span class="n">rotation</span> <span class="o">=</span> <span class="mf">0.0f</span><span class="p">,</span> <span class="n">Color</span> <span class="n">color</span> <span class="o">=</span> <span class="n">Color</span><span class="p">(</span><span class="mf">1.0f</span><span class="p">,</span> <span class="mf">1.0f</span><span class="p">,</span> <span class="mf">1.0f</span><span class="p">),</span> <span class="kt">bool</span> <span class="n">flipX</span> <span class="o">=</span> <span class="nb">false</span><span class="p">,</span> <span class="kt">bool</span> <span class="n">flipY</span> <span class="o">=</span> <span class="nb">false</span><span class="p">);</span>
    <span class="kt">void</span> <span class="nf">FlushBatches</span><span class="p">();</span>

  <span class="k">private</span><span class="o">:</span>
    <span class="n">RendererBatcher</span> <span class="n">rendererBatcher</span><span class="p">;</span>
    <span class="n">SpriteRenderer</span> <span class="o">*</span><span class="n">spriteRenderer</span> <span class="o">=</span> <span class="k">nullptr</span><span class="p">;</span>
<span class="p">};</span>

<span class="cp">#endif </span><span class="c1">//RENDERER_2D_H</span>
</code></pre></div>
<div class="highlight"><pre><span></span><code><span class="cp">#include</span> <span class="cpf">"renderer_2d.h"</span><span class="cp"></span>

<span class="cp">#include</span> <span class="cpf">&lt;cassert&gt;</span><span class="cp"></span>
<span class="cp">#include</span> <span class="cpf">&lt;glad/glad.h&gt;</span><span class="cp"></span>

<span class="n">Renderer2D</span><span class="o">::~</span><span class="n">Renderer2D</span><span class="p">()</span> <span class="p">{</span>
    <span class="k">if</span> <span class="p">(</span><span class="n">spriteRenderer</span> <span class="o">!=</span> <span class="k">nullptr</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">delete</span> <span class="n">spriteRenderer</span><span class="p">;</span>
    <span class="p">}</span>
<span class="p">}</span>

<span class="kt">void</span> <span class="n">Renderer2D</span><span class="o">::</span><span class="n">Initialize</span><span class="p">()</span> <span class="p">{</span>
    <span class="n">glEnable</span><span class="p">(</span><span class="n">GL_BLEND</span><span class="p">);</span>
    <span class="n">glBlendFunc</span><span class="p">(</span><span class="n">GL_SRC_ALPHA</span><span class="p">,</span> <span class="n">GL_ONE_MINUS_SRC_ALPHA</span><span class="p">);</span>

    <span class="n">spriteRenderer</span> <span class="o">=</span> <span class="k">new</span> <span class="n">SpriteRenderer</span><span class="p">();</span>
<span class="p">}</span>


<span class="kt">void</span> <span class="n">Renderer2D</span><span class="o">::</span><span class="n">SubmitSpriteBatchItem</span><span class="p">(</span><span class="n">Texture</span> <span class="o">*</span><span class="n">texture2D</span><span class="p">,</span> <span class="n">Rect2</span> <span class="n">sourceRectangle</span><span class="p">,</span> <span class="n">Rect2</span> <span class="n">destinationRectangle</span><span class="p">,</span>
                                       <span class="kt">int</span> <span class="n">zIndex</span><span class="p">,</span> <span class="kt">float</span> <span class="n">rotation</span><span class="p">,</span>
                                       <span class="n">Color</span> <span class="n">color</span><span class="p">,</span> <span class="kt">bool</span> <span class="n">flipX</span><span class="p">,</span> <span class="kt">bool</span> <span class="n">flipY</span><span class="p">)</span> <span class="p">{</span>
    <span class="n">SpriteBatchItem</span> <span class="n">spriteBatchItem</span> <span class="o">=</span> <span class="p">{</span>
        <span class="n">texture2D</span><span class="p">,</span>
        <span class="n">sourceRectangle</span><span class="p">,</span>
        <span class="n">destinationRectangle</span><span class="p">,</span>
        <span class="n">rotation</span><span class="p">,</span>
        <span class="n">color</span><span class="p">,</span>
        <span class="n">flipX</span><span class="p">,</span>
        <span class="n">flipY</span>
    <span class="p">};</span>
    <span class="n">rendererBatcher</span><span class="p">.</span><span class="n">BatchDrawSprite</span><span class="p">(</span><span class="n">spriteBatchItem</span><span class="p">,</span> <span class="n">zIndex</span><span class="p">);</span>
<span class="p">}</span>

<span class="kt">void</span> <span class="n">Renderer2D</span><span class="o">::</span><span class="n">FlushBatches</span><span class="p">()</span> <span class="p">{</span>
    <span class="n">assert</span><span class="p">(</span><span class="n">spriteRenderer</span> <span class="o">!=</span> <span class="k">nullptr</span> <span class="o">&amp;&amp;</span> <span class="s">"SpriteRenderer is NULL, initialize the Renderer2D before using!"</span><span class="p">);</span>

    <span class="k">const</span> <span class="n">RenderFlushFunction</span> <span class="o">&amp;</span><span class="n">renderFlushFunction</span> <span class="o">=</span> <span class="p">[</span><span class="k">this</span><span class="p">]</span> <span class="p">(</span><span class="k">const</span> <span class="kt">int</span> <span class="n">zIndex</span><span class="p">,</span> <span class="k">const</span> <span class="n">ZIndexDrawBatch</span> <span class="o">&amp;</span><span class="n">zIndexDrawBatch</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">for</span> <span class="p">(</span><span class="k">const</span> <span class="n">SpriteBatchItem</span> <span class="o">&amp;</span><span class="nl">spriteBatchItem</span> <span class="p">:</span> <span class="n">zIndexDrawBatch</span><span class="p">.</span><span class="n">spriteDrawBatches</span><span class="p">)</span> <span class="p">{</span>
            <span class="n">spriteRenderer</span><span class="o">-&gt;</span><span class="n">Draw</span><span class="p">(</span><span class="n">spriteBatchItem</span><span class="p">.</span><span class="n">texture2D</span><span class="p">,</span>
                                 <span class="n">spriteBatchItem</span><span class="p">.</span><span class="n">sourceRectangle</span><span class="p">,</span>
                                 <span class="n">spriteBatchItem</span><span class="p">.</span><span class="n">destinationRectangle</span><span class="p">,</span>
                                 <span class="n">spriteBatchItem</span><span class="p">.</span><span class="n">rotation</span><span class="p">,</span>
                                 <span class="n">spriteBatchItem</span><span class="p">.</span><span class="n">color</span><span class="p">,</span>
                                 <span class="n">spriteBatchItem</span><span class="p">.</span><span class="n">flipX</span><span class="p">,</span>
                                 <span class="n">spriteBatchItem</span><span class="p">.</span><span class="n">flipY</span><span class="p">);</span>
        <span class="p">}</span>
    <span class="p">};</span>
    <span class="n">rendererBatcher</span><span class="p">.</span><span class="n">Flush</span><span class="p">(</span><span class="n">renderFlushFunction</span><span class="p">);</span>
<span class="p">}</span>
</code></pre></div>
<p>Explanation coming soon...</p>
<h2 id="render-sprites">Render Sprites</h2>
<p>Updating constructor to initialize member pointer variables.</p>
<div class="highlight"><pre><span></span><code><span class="n">GameEngine</span><span class="o">::</span><span class="n">GameEngine</span><span class="p">()</span> <span class="o">:</span>
    <span class="n">projectProperties</span><span class="p">(</span><span class="n">ProjectProperties</span><span class="o">::</span><span class="n">GetInstance</span><span class="p">()),</span>
    <span class="n">engineContext</span><span class="p">(</span><span class="n">GameEngineContext</span><span class="o">::</span><span class="n">GetInstance</span><span class="p">()),</span>
    <span class="n">renderContext</span><span class="p">(</span><span class="n">RenderContext</span><span class="o">::</span><span class="n">GetInstance</span><span class="p">()),</span>
    <span class="n">assetManager</span><span class="p">(</span><span class="n">AssetManager</span><span class="o">::</span><span class="n">GetInstance</span><span class="p">()),</span>
    <span class="n">fpsCounter</span><span class="p">(</span><span class="n">FPSCounter</span><span class="o">::</span><span class="n">GetInstance</span><span class="p">()),</span>
    <span class="n">logger</span><span class="p">(</span><span class="n">Logger</span><span class="o">::</span><span class="n">GetInstance</span><span class="p">())</span> <span class="p">{</span>
    <span class="n">Initialize</span><span class="p">();</span>
<span class="p">}</span>
</code></pre></div>
<p>Implementing the private <code>InitializeRendering</code> function.</p>
<div class="highlight"><pre><span></span><code><span class="kt">bool</span> <span class="nf">GameEngine::InitializeRendering</span><span class="p">()</span> <span class="p">{</span>
    <span class="c1">// OpenGL attributes</span>
    <span class="n">SDL_GL_SetAttribute</span><span class="p">(</span><span class="n">SDL_GL_DOUBLEBUFFER</span><span class="p">,</span> <span class="mi">1</span><span class="p">);</span>
    <span class="n">SDL_GL_SetAttribute</span><span class="p">(</span><span class="n">SDL_GL_DEPTH_SIZE</span><span class="p">,</span> <span class="mi">24</span><span class="p">);</span>
    <span class="n">SDL_GL_SetAttribute</span><span class="p">(</span><span class="n">SDL_GL_STENCIL_SIZE</span><span class="p">,</span> <span class="mi">8</span><span class="p">);</span>

    <span class="n">SDL_GL_SetAttribute</span><span class="p">(</span><span class="n">SDL_GL_CONTEXT_MAJOR_VERSION</span><span class="p">,</span> <span class="mi">3</span><span class="p">);</span>
    <span class="n">SDL_GL_SetAttribute</span><span class="p">(</span><span class="n">SDL_GL_CONTEXT_MINOR_VERSION</span><span class="p">,</span> <span class="mi">3</span><span class="p">);</span>
    <span class="n">SDL_GL_SetAttribute</span><span class="p">(</span><span class="n">SDL_GL_CONTEXT_PROFILE_MASK</span><span class="p">,</span> <span class="n">SDL_GL_CONTEXT_PROFILE_CORE</span><span class="p">);</span>

    <span class="n">renderContext</span><span class="o">-&gt;</span><span class="n">window</span> <span class="o">=</span> <span class="n">SDL_CreateWindow</span><span class="p">(</span>
                                <span class="n">projectProperties</span><span class="o">-&gt;</span><span class="n">GetGameTitle</span><span class="p">().</span><span class="n">c_str</span><span class="p">(),</span>
                                <span class="n">SDL_WINDOWPOS_CENTERED</span><span class="p">,</span>
                                <span class="n">SDL_WINDOWPOS_CENTERED</span><span class="p">,</span>
                                <span class="n">projectProperties</span><span class="o">-&gt;</span><span class="n">GetWindowWidth</span><span class="p">(),</span>
                                <span class="n">projectProperties</span><span class="o">-&gt;</span><span class="n">GetWindowHeight</span><span class="p">(),</span>
                                <span class="n">renderContext</span><span class="o">-&gt;</span><span class="n">windowFlags</span><span class="p">);</span>
    <span class="n">renderContext</span><span class="o">-&gt;</span><span class="n">glContext</span> <span class="o">=</span> <span class="n">SDL_GL_CreateContext</span><span class="p">(</span><span class="n">renderContext</span><span class="o">-&gt;</span><span class="n">window</span><span class="p">);</span>
    <span class="n">renderContext</span><span class="o">-&gt;</span><span class="n">currentWindowWidth</span> <span class="o">=</span> <span class="n">projectProperties</span><span class="o">-&gt;</span><span class="n">GetWindowWidth</span><span class="p">();</span>
    <span class="n">renderContext</span><span class="o">-&gt;</span><span class="n">currentWindowHeight</span> <span class="o">=</span> <span class="n">projectProperties</span><span class="o">-&gt;</span><span class="n">GetWindowHeight</span><span class="p">();</span>

    <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="n">gladLoadGLLoader</span><span class="p">((</span><span class="n">GLADloadproc</span><span class="p">)</span><span class="n">SDL_GL_GetProcAddress</span><span class="p">))</span> <span class="p">{</span>
        <span class="n">logger</span><span class="o">-&gt;</span><span class="n">Error</span><span class="p">(</span><span class="s">"Couldn't initialize glad"</span><span class="p">);</span>
        <span class="k">return</span> <span class="nb">false</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="n">renderer2D</span><span class="p">.</span><span class="n">Initialize</span><span class="p">();</span>

    <span class="c1">// Temp Load Assets</span>
    <span class="n">assetManager</span><span class="o">-&gt;</span><span class="n">LoadTexture</span><span class="p">(</span><span class="s">"assets/images/melissa_walk_animation.png"</span><span class="p">,</span> <span class="s">"assets/images/melissa_walk_animation.png"</span><span class="p">);</span>
    <span class="k">return</span> <span class="nb">true</span><span class="p">;</span>
<span class="p">}</span>
</code></pre></div>
<p>Now we will implement the <code>Render</code> function.</p>
<div class="highlight"><pre><span></span><code><span class="kt">void</span> <span class="nf">GameEngine::Render</span><span class="p">()</span> <span class="p">{</span>
    <span class="n">glClearColor</span><span class="p">(</span><span class="n">projectProperties</span><span class="o">-&gt;</span><span class="n">backgroundClearColor</span><span class="p">.</span><span class="n">r</span><span class="p">,</span>
                 <span class="n">projectProperties</span><span class="o">-&gt;</span><span class="n">backgroundClearColor</span><span class="p">.</span><span class="n">g</span><span class="p">,</span>
                 <span class="n">projectProperties</span><span class="o">-&gt;</span><span class="n">backgroundClearColor</span><span class="p">.</span><span class="n">b</span><span class="p">,</span>
                 <span class="n">projectProperties</span><span class="o">-&gt;</span><span class="n">backgroundClearColor</span><span class="p">.</span><span class="n">a</span><span class="p">);</span>
    <span class="n">glClear</span><span class="p">(</span><span class="n">GL_COLOR_BUFFER_BIT</span> <span class="o">|</span> <span class="n">GL_DEPTH_BUFFER_BIT</span> <span class="o">|</span> <span class="n">GL_STENCIL_BUFFER_BIT</span><span class="p">);</span>

    <span class="c1">// Render Sprites</span>
    <span class="k">static</span> <span class="n">Texture</span> <span class="o">*</span><span class="n">mellisaWalkTexture</span> <span class="o">=</span> <span class="n">assetManager</span><span class="o">-&gt;</span><span class="n">GetTexture</span><span class="p">(</span><span class="s">"assets/images/melissa_walk_animation.png"</span><span class="p">);</span>
    <span class="k">static</span> <span class="n">Rect2</span> <span class="n">drawSourceRect</span> <span class="o">=</span> <span class="n">Rect2</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">32</span><span class="p">,</span> <span class="mi">32</span><span class="p">);</span>
    <span class="k">static</span> <span class="n">Rect2</span> <span class="n">drawDestinationRect</span> <span class="o">=</span> <span class="n">Rect2</span><span class="p">(</span><span class="n">windowCenter</span><span class="p">.</span><span class="n">x</span><span class="p">,</span> <span class="n">windowCenter</span><span class="p">.</span><span class="n">y</span><span class="p">,</span> <span class="n">drawSourceRect</span><span class="p">.</span><span class="n">w</span><span class="p">,</span> <span class="n">drawSourceRect</span><span class="p">.</span><span class="n">h</span><span class="p">);</span>
    <span class="n">renderer2D</span><span class="p">.</span><span class="n">SubmitSpriteBatchItem</span><span class="p">(</span><span class="n">mellisaWalkTexture</span><span class="p">,</span> <span class="n">drawSourceRect</span><span class="p">,</span> <span class="n">drawDestinationRect</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>

    <span class="c1">// Flush</span>
    <span class="n">renderer2D</span><span class="p">.</span><span class="n">FlushBatches</span><span class="p">();</span>


    <span class="n">SDL_GL_SwapWindow</span><span class="p">(</span><span class="n">renderContext</span><span class="o">-&gt;</span><span class="n">window</span><span class="p">);</span>
<span class="p">}</span>
</code></pre></div>
<p>Lastly we are going to process input by checking if an <code>SDL_QUIT</code> <a href="https://wiki.libsdl.org/SDL_EventType">event type</a> was triggered.  If we click the 'X' in the top right part of the window, we will now close the window and shutdown the engine.</p>
<div class="highlight"><pre><span></span><code><span class="kt">void</span> <span class="nf">GameEngine::ProcessInput</span><span class="p">()</span> <span class="p">{</span>
    <span class="n">SDL_Event</span> <span class="n">event</span><span class="p">;</span>
    <span class="k">while</span> <span class="p">(</span><span class="n">SDL_PollEvent</span><span class="p">(</span><span class="o">&amp;</span><span class="n">event</span><span class="p">))</span> <span class="p">{</span>
        <span class="k">switch</span><span class="p">(</span><span class="n">event</span><span class="p">.</span><span class="n">type</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">case</span> <span class="nl">SDL_QUIT</span><span class="p">:</span>
            <span class="n">engineContext</span><span class="o">-&gt;</span><span class="n">SetRunning</span><span class="p">(</span><span class="nb">false</span><span class="p">);</span>
            <span class="k">break</span><span class="p">;</span>
        <span class="k">case</span> <span class="nl">SDL_WINDOWEVENT</span><span class="p">:</span>
            <span class="k">switch</span> <span class="p">(</span><span class="n">event</span><span class="p">.</span><span class="n">window</span><span class="p">.</span><span class="n">event</span><span class="p">)</span> <span class="p">{</span>
            <span class="k">case</span> <span class="nl">SDL_WINDOWEVENT_RESIZED</span><span class="p">:</span>
                <span class="n">renderContext</span><span class="o">-&gt;</span><span class="n">currentWindowWidth</span> <span class="o">=</span> <span class="n">event</span><span class="p">.</span><span class="n">window</span><span class="p">.</span><span class="n">data1</span><span class="p">;</span>
                <span class="n">renderContext</span><span class="o">-&gt;</span><span class="n">currentWindowHeight</span> <span class="o">=</span> <span class="n">event</span><span class="p">.</span><span class="n">window</span><span class="p">.</span><span class="n">data2</span><span class="p">;</span>
                <span class="n">glViewport</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="n">renderContext</span><span class="o">-&gt;</span><span class="n">currentWindowWidth</span><span class="p">,</span> <span class="n">renderContext</span><span class="o">-&gt;</span><span class="n">currentWindowHeight</span><span class="p">);</span>
                <span class="k">break</span><span class="p">;</span>
            <span class="p">}</span>
            <span class="k">break</span><span class="p">;</span>
        <span class="p">}</span>
    <span class="p">}</span>
<span class="p">}</span>
</code></pre></div>
<p>After executing the code, this will be rendered to the screen:</p>
<p><img alt="Rendering Sprite Screenshot" src="https://github.com/Chukobyte/learn-engine-dev/blob/main/assets/images/screenshots/led_3_0.PNG?raw=true"/></p>
<p>The source code for this section can be found <a href="https://github.com/Chukobyte/learn-engine-dev/tree/main/src/1.foundation/3.opengl_rendering/3.0.rendering_sprites">here</a>.  Now that we have rendered a sprite it's now time to render font.</p>
</article>
</div>
</div>
</main>
<footer class="md-footer">
<nav aria-label="Footer" class="md-footer__inner md-grid">
<a class="md-footer__link md-footer__link--prev" href="../asset_management/" rel="prev">
<div class="md-footer__button md-icon">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"></path></svg>
</div>
<div class="md-footer__title">
<div class="md-ellipsis">
<span class="md-footer__direction">
                Previous
              </span>
              Asset Management
            </div>
</div>
</a>
<a class="md-footer__link md-footer__link--next" href="../rendering_text/" rel="next">
<div class="md-footer__title">
<div class="md-ellipsis">
<span class="md-footer__direction">
                Next
              </span>
              Rendering Text
            </div>
</div>
<div class="md-footer__button md-icon">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M4 11v2h12l-5.5 5.5 1.42 1.42L19.84 12l-7.92-7.92L10.5 5.5 16 11H4z"></path></svg>
</div>
</a>
</nav>
<div class="md-footer-meta md-typeset">
<div class="md-footer-meta__inner md-grid">
<div class="md-footer-copyright">
<div class="md-footer-copyright__highlight">
            Copyright © 2021 Chukobyte
          </div>
        
        Made with
        <a href="https://squidfunk.github.io/mkdocs-material/" rel="noopener" target="_blank">
          Material for MkDocs
        </a>
</div>
</div>
</div>
</footer>
</div>
<div class="md-dialog" data-md-component="dialog">
<div class="md-dialog__inner md-typeset"></div>
</div>
<script id="__config" type="application/json">{"base": "../../..", "features": [], "translations": {"clipboard.copy": "Copy to clipboard", "clipboard.copied": "Copied to clipboard", "search.config.lang": "en", "search.config.pipeline": "trimmer, stopWordFilter", "search.config.separator": "[\\s\\-]+", "search.placeholder": "Search", "search.result.placeholder": "Type to start searching", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.term.missing": "Missing"}, "search": "../../../assets/javascripts/workers/search.4fa0e4ee.min.js", "version": null}</script>
<script src="../../../assets/javascripts/bundle.1d3bfcf1.min.js"></script>
</body>
</html>